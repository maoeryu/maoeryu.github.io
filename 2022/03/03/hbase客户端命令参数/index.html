<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"maoeryu.github.io","root":"/","images":"/images","scheme":"Pisces","version":"8.2.1","exturl":false,"sidebar":{"position":"left","width":200,"display":"post","padding":7,"offset":5},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>
<meta name="description" content="hbase工具命令.shell下执行$&amp;#123;HBASE_HOME&amp;#125;&#x2F;bin&#x2F;hbase查看.">
<meta property="og:type" content="article">
<meta property="og:title" content="hbase客户端命令参数">
<meta property="og:url" content="https://maoeryu.github.io/2022/03/03/hbase%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0/index.html">
<meta property="og:site_name" content="FlyingPig">
<meta property="og:description" content="hbase工具命令.shell下执行$&amp;#123;HBASE_HOME&amp;#125;&#x2F;bin&#x2F;hbase查看.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://maoeryu.github.io/images/hbq6.png">
<meta property="og:image" content="https://maoeryu.github.io/images/hbq7.png">
<meta property="og:image" content="https://maoeryu.github.io/images/hbsnap1.png">
<meta property="og:image" content="https://maoeryu.github.io/images/fly1398.png">
<meta property="og:image" content="https://maoeryu.github.io/images/fly1399.png">
<meta property="og:image" content="https://maoeryu.github.io/images/fly1400.png">
<meta property="og:image" content="https://maoeryu.github.io/images/fly1401.png">
<meta property="og:image" content="https://maoeryu.github.io/images/fly1402.png">
<meta property="article:published_time" content="2022-03-02T16:00:00.000Z">
<meta property="article:modified_time" content="2023-02-24T09:24:58.561Z">
<meta property="article:author" content="maoeryu">
<meta property="article:tag" content="hbase">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://maoeryu.github.io/images/hbq6.png">


<link rel="canonical" href="https://maoeryu.github.io/2022/03/03/hbase%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>hbase客户端命令参数 | FlyingPig</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">FlyingPig</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9"><span class="nav-number">1.1.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.</span> <span class="nav-text">命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#thrift-thrift2"><span class="nav-number">2.</span> <span class="nav-text">thrift&#x2F;thrift2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rest"><span class="nav-number">3.</span> <span class="nav-text">rest</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E8%8C%83%E5%9B%B4"><span class="nav-number">3.1.</span> <span class="nav-text">集群范围</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#version-cluster"><span class="nav-number">3.1.1.</span> <span class="nav-text">&#x2F;version&#x2F;cluster</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#status-cluster"><span class="nav-number">3.1.2.</span> <span class="nav-text">&#x2F;status&#x2F;cluster</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">3.1.3.</span> <span class="nav-text">&#x2F;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-number">3.2.</span> <span class="nav-text">命名空间</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces"><span class="nav-number">3.2.1.</span> <span class="nav-text">&#x2F;namespaces</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces-namespace"><span class="nav-number">3.2.2.</span> <span class="nav-text">&#x2F;namespaces&#x2F;namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces-namespace-1"><span class="nav-number">3.2.3.</span> <span class="nav-text">&#x2F;namespaces&#x2F;namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces-namespace-tables"><span class="nav-number">3.2.4.</span> <span class="nav-text">&#x2F;namespaces&#x2F;namespace&#x2F;tables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces-namespace-2"><span class="nav-number">3.2.5.</span> <span class="nav-text">&#x2F;namespaces&#x2F;namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#namespaces-namespace-3"><span class="nav-number">3.2.6.</span> <span class="nav-text">&#x2F;namespaces&#x2F;namespace</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8"><span class="nav-number">3.3.</span> <span class="nav-text">表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#table-schema"><span class="nav-number">3.3.1.</span> <span class="nav-text">&#x2F;table&#x2F;schema</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-schema-1"><span class="nav-number">3.3.2.</span> <span class="nav-text">&#x2F;table&#x2F;schema</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-schema-2"><span class="nav-number">3.3.3.</span> <span class="nav-text">&#x2F;table&#x2F;schema</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-schema-3"><span class="nav-number">3.3.4.</span> <span class="nav-text">&#x2F;table&#x2F;schema</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-regions"><span class="nav-number">3.3.5.</span> <span class="nav-text">&#x2F;table&#x2F;regions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get%E6%93%8D%E4%BD%9C"><span class="nav-number">3.4.</span> <span class="nav-text">Get操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#table-row-column-qualifier-timestamp"><span class="nav-number">3.4.1.</span> <span class="nav-text">&#x2F;table&#x2F;row&#x2F;column:qualifier&#x2F;timestamp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-row-column-qualifier-v-number-of-versions"><span class="nav-number">3.4.2.</span> <span class="nav-text">&#x2F;table&#x2F;row&#x2F;column:qualifier?v&#x3D;number_of_versions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scan%E6%93%8D%E4%BD%9C"><span class="nav-number">3.5.</span> <span class="nav-text">Scan操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#table-scanner"><span class="nav-number">3.5.1.</span> <span class="nav-text">&#x2F;table&#x2F;scanner&#x2F;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-scanner-1"><span class="nav-number">3.5.2.</span> <span class="nav-text">&#x2F;table&#x2F;scanner&#x2F;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-scanner-scanner-id"><span class="nav-number">3.5.3.</span> <span class="nav-text">&#x2F;table&#x2F;scanner&#x2F;scanner_id</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-scanner-scanner-id-1"><span class="nav-number">3.5.4.</span> <span class="nav-text">&#x2F;table&#x2F;scanner&#x2F;scanner_id</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Put%E6%93%8D%E4%BD%9C"><span class="nav-number">3.6.</span> <span class="nav-text">Put操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#table-row-key"><span class="nav-number">3.6.1.</span> <span class="nav-text">&#x2F;table&#x2F;row_key&#x2F;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hbck"><span class="nav-number">4.</span> <span class="nav-text">hbck</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-1"><span class="nav-number">4.1.</span> <span class="nav-text">选项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E9%80%89%E9%A1%B9"><span class="nav-number">4.1.1.</span> <span class="nav-text">通用选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%83%E6%95%B0%E6%8D%AE%E4%BF%AE%E5%A4%8D%E9%80%89%E9%A1%B9"><span class="nav-number">4.1.2.</span> <span class="nav-text">元数据修复选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Datafile%E4%BF%AE%E5%A4%8D%E9%80%89%E9%A1%B9"><span class="nav-number">4.1.3.</span> <span class="nav-text">Datafile修复选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Meta%E4%BF%AE%E5%A4%8D%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4"><span class="nav-number">4.1.4.</span> <span class="nav-text">Meta修复快捷指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Table-lock%E9%80%89%E9%A1%B9"><span class="nav-number">4.1.5.</span> <span class="nav-text">Table lock选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Znode%E9%80%89%E9%A1%B9"><span class="nav-number">4.1.6.</span> <span class="nav-text">Znode选项</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D"><span class="nav-number">4.2.</span> <span class="nav-text">修复</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C-hbck-%E4%BB%A5%E8%AF%86%E5%88%AB%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="nav-number">4.2.1.</span> <span class="nav-text">运行 hbck 以识别不一致</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="nav-number">4.2.2.</span> <span class="nav-text">不一致</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%8C%96%E7%BB%B4%E4%BF%AE"><span class="nav-number">4.2.3.</span> <span class="nav-text">本地化维修</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BA%E5%9F%9F%E9%87%8D%E5%8F%A0%E4%BF%AE%E5%A4%8D"><span class="nav-number">4.2.4.</span> <span class="nav-text">区域重叠修复</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Meta-%E6%9C%AA%E6%AD%A3%E7%A1%AE%E5%88%86%E9%85%8D"><span class="nav-number">4.2.4.1.</span> <span class="nav-text">Meta 未正确分配</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HBase-%E7%89%88%E6%9C%AC%E6%96%87%E4%BB%B6%E4%B8%A2%E5%A4%B1"><span class="nav-number">4.2.4.2.</span> <span class="nav-text">HBase 版本文件丢失</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Root-%E5%92%8C-META-%E5%B7%B2%E6%8D%9F%E5%9D%8F"><span class="nav-number">4.2.4.3.</span> <span class="nav-text">Root 和 META 已损坏.</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A6%BB%E7%BA%BF%E6%8B%86%E5%88%86%E7%88%B6%E7%BA%A7"><span class="nav-number">4.2.4.4.</span> <span class="nav-text">离线拆分父级</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B"><span class="nav-number">4.2.5.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#clean"><span class="nav-number">5.</span> <span class="nav-text">clean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shell"><span class="nav-number">6.</span> <span class="nav-text">shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#general"><span class="nav-number">6.1.</span> <span class="nav-text">general</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#status"><span class="nav-number">6.1.1.</span> <span class="nav-text">status</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#table-help"><span class="nav-number">6.1.2.</span> <span class="nav-text">table_help</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#version"><span class="nav-number">6.1.3.</span> <span class="nav-text">version</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#whoami"><span class="nav-number">6.1.4.</span> <span class="nav-text">whoami</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ddl"><span class="nav-number">6.2.</span> <span class="nav-text">ddl</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#alter"><span class="nav-number">6.2.1.</span> <span class="nav-text">alter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alter-async"><span class="nav-number">6.2.2.</span> <span class="nav-text">alter_async</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alter-status"><span class="nav-number">6.2.3.</span> <span class="nav-text">alter_status</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#create"><span class="nav-number">6.2.4.</span> <span class="nav-text">create</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#describe"><span class="nav-number">6.2.5.</span> <span class="nav-text">describe</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disable"><span class="nav-number">6.2.6.</span> <span class="nav-text">disable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disable-all"><span class="nav-number">6.2.7.</span> <span class="nav-text">disable_all</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#drop"><span class="nav-number">6.2.8.</span> <span class="nav-text">drop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#drop-all"><span class="nav-number">6.2.9.</span> <span class="nav-text">drop_all</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#enable"><span class="nav-number">6.2.10.</span> <span class="nav-text">enable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#enable-all"><span class="nav-number">6.2.11.</span> <span class="nav-text">enable_all</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#exists"><span class="nav-number">6.2.12.</span> <span class="nav-text">exists</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get-table"><span class="nav-number">6.2.13.</span> <span class="nav-text">get_table</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#is-disabled"><span class="nav-number">6.2.14.</span> <span class="nav-text">is_disabled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#is-enabled"><span class="nav-number">6.2.15.</span> <span class="nav-text">is_enabled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list"><span class="nav-number">6.2.16.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#locate-region"><span class="nav-number">6.2.17.</span> <span class="nav-text">locate_region</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#show-filters"><span class="nav-number">6.2.18.</span> <span class="nav-text">show_filters</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#namespace"><span class="nav-number">6.3.</span> <span class="nav-text">namespace</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#alter-namespace"><span class="nav-number">6.3.1.</span> <span class="nav-text">alter_namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#create-namespace"><span class="nav-number">6.3.2.</span> <span class="nav-text">create_namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#describe-namespace"><span class="nav-number">6.3.3.</span> <span class="nav-text">describe_namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#drop-namespace"><span class="nav-number">6.3.4.</span> <span class="nav-text">drop_namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-namespace"><span class="nav-number">6.3.5.</span> <span class="nav-text">list_namespace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-namespace-tables"><span class="nav-number">6.3.6.</span> <span class="nav-text">list_namespace_tables</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dml"><span class="nav-number">6.4.</span> <span class="nav-text">dml</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#append"><span class="nav-number">6.4.1.</span> <span class="nav-text">append</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#count"><span class="nav-number">6.4.2.</span> <span class="nav-text">count</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete"><span class="nav-number">6.4.3.</span> <span class="nav-text">delete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#deleteall"><span class="nav-number">6.4.4.</span> <span class="nav-text">deleteall</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get"><span class="nav-number">6.4.5.</span> <span class="nav-text">get</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get-counter"><span class="nav-number">6.4.6.</span> <span class="nav-text">get_counter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get-splits"><span class="nav-number">6.4.7.</span> <span class="nav-text">get_splits</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#incr"><span class="nav-number">6.4.8.</span> <span class="nav-text">incr</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#put"><span class="nav-number">6.4.9.</span> <span class="nav-text">put</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#scan"><span class="nav-number">6.4.10.</span> <span class="nav-text">scan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#truncate"><span class="nav-number">6.4.11.</span> <span class="nav-text">truncate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#truncate-preserve"><span class="nav-number">6.4.12.</span> <span class="nav-text">truncate_preserve</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tools"><span class="nav-number">6.5.</span> <span class="nav-text">tools</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#assign"><span class="nav-number">6.5.1.</span> <span class="nav-text">assign</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unassign"><span class="nav-number">6.5.2.</span> <span class="nav-text">unassign</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#balance-switch"><span class="nav-number">6.5.3.</span> <span class="nav-text">balance_switch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#balancer"><span class="nav-number">6.5.4.</span> <span class="nav-text">balancer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#balancer-enabled"><span class="nav-number">6.5.5.</span> <span class="nav-text">balancer_enabled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#flush"><span class="nav-number">6.5.6.</span> <span class="nav-text">flush</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#compact"><span class="nav-number">6.5.7.</span> <span class="nav-text">compact</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#compact-rs"><span class="nav-number">6.5.8.</span> <span class="nav-text">compact_rs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#major-compact"><span class="nav-number">6.5.9.</span> <span class="nav-text">major_compact</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#merge-region"><span class="nav-number">6.5.10.</span> <span class="nav-text">merge_region</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#split"><span class="nav-number">6.5.11.</span> <span class="nav-text">split</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#move"><span class="nav-number">6.5.12.</span> <span class="nav-text">move</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#close-region"><span class="nav-number">6.5.13.</span> <span class="nav-text">close_region</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#normalize"><span class="nav-number">6.5.14.</span> <span class="nav-text">normalize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#normalizer-enabled"><span class="nav-number">6.5.15.</span> <span class="nav-text">normalizer_enabled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#normalizer-switch"><span class="nav-number">6.5.16.</span> <span class="nav-text">normalizer_switch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#trace"><span class="nav-number">6.5.17.</span> <span class="nav-text">trace</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wal-roll"><span class="nav-number">6.5.18.</span> <span class="nav-text">wal_roll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#catalogjanator-enabled"><span class="nav-number">6.5.19.</span> <span class="nav-text">catalogjanator_enabled</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#catalogjanator-run"><span class="nav-number">6.5.20.</span> <span class="nav-text">catalogjanator_run</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#catalogjanitor-switch"><span class="nav-number">6.5.21.</span> <span class="nav-text">catalogjanitor_switch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zk-dump"><span class="nav-number">6.5.22.</span> <span class="nav-text">zk_dump</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replication"><span class="nav-number">6.6.</span> <span class="nav-text">replication</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#add-peer"><span class="nav-number">6.6.1.</span> <span class="nav-text">add_peer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#append-peer-tableCFs"><span class="nav-number">6.6.2.</span> <span class="nav-text">append_peer_tableCFs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disable-peer"><span class="nav-number">6.6.3.</span> <span class="nav-text">disable_peer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#disable-table-replication"><span class="nav-number">6.6.4.</span> <span class="nav-text">disable_table_replication</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#enable-peer"><span class="nav-number">6.6.5.</span> <span class="nav-text">enable_peer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#enable-table-replication"><span class="nav-number">6.6.6.</span> <span class="nav-text">enable_table_replication</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-peers"><span class="nav-number">6.6.7.</span> <span class="nav-text">list_peers</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-replicated-tables"><span class="nav-number">6.6.8.</span> <span class="nav-text">list_replicated_tables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#remove-peer"><span class="nav-number">6.6.9.</span> <span class="nav-text">remove_peer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#remove-peer-tableCFs"><span class="nav-number">6.6.10.</span> <span class="nav-text">remove_peer_tableCFs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-peer-tableCFs"><span class="nav-number">6.6.11.</span> <span class="nav-text">set_peer_tableCFs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#show-peer-tableCFs"><span class="nav-number">6.6.12.</span> <span class="nav-text">show_peer_tableCFs</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#snapshots"><span class="nav-number">6.7.</span> <span class="nav-text">snapshots</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#clone-snapshot"><span class="nav-number">6.7.1.</span> <span class="nav-text">clone_snapshot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete-all-snapshot"><span class="nav-number">6.7.2.</span> <span class="nav-text">delete_all_snapshot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete-snapshot"><span class="nav-number">6.7.3.</span> <span class="nav-text">delete_snapshot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-snapshots"><span class="nav-number">6.7.4.</span> <span class="nav-text">list_snapshots</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#restore-snapshot"><span class="nav-number">6.7.5.</span> <span class="nav-text">restore_snapshot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#snapshot"><span class="nav-number">6.7.6.</span> <span class="nav-text">snapshot</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#configuration"><span class="nav-number">6.8.</span> <span class="nav-text">configuration</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#update-all-config"><span class="nav-number">6.8.1.</span> <span class="nav-text">update_all_config</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#update-config"><span class="nav-number">6.8.2.</span> <span class="nav-text">update_config</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#quotas"><span class="nav-number">6.9.</span> <span class="nav-text">quotas</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#list-quotas"><span class="nav-number">6.9.1.</span> <span class="nav-text">list_quotas</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-quota"><span class="nav-number">6.9.2.</span> <span class="nav-text">set_quota</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#security"><span class="nav-number">6.10.</span> <span class="nav-text">security</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#grant"><span class="nav-number">6.10.1.</span> <span class="nav-text">grant</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-security-capabilities"><span class="nav-number">6.10.2.</span> <span class="nav-text">list_security_capabilities</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#revoke"><span class="nav-number">6.10.3.</span> <span class="nav-text">revoke</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#user-permission"><span class="nav-number">6.10.4.</span> <span class="nav-text">user_permission</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#procedures"><span class="nav-number">6.11.</span> <span class="nav-text">procedures</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#abort-procedure"><span class="nav-number">6.11.1.</span> <span class="nav-text">abort_procedure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-procedures"><span class="nav-number">6.11.2.</span> <span class="nav-text">list_procedures</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#visibility-labels"><span class="nav-number">6.12.</span> <span class="nav-text">visibility labels</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#add-labels"><span class="nav-number">6.12.1.</span> <span class="nav-text">add_labels</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#clear-auths"><span class="nav-number">6.12.2.</span> <span class="nav-text">clear_auths</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get-auths"><span class="nav-number">6.12.3.</span> <span class="nav-text">get_auths</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list-labels"><span class="nav-number">6.12.4.</span> <span class="nav-text">list_labels</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-auths"><span class="nav-number">6.12.5.</span> <span class="nav-text">set_auths</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set-visibility"><span class="nav-number">6.12.6.</span> <span class="nav-text">set_visibility</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pe"><span class="nav-number">7.</span> <span class="nav-text">pe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rs%E5%85%B3%E9%97%AD-%E9%87%8D%E5%90%AF"><span class="nav-number">8.</span> <span class="nav-text">rs关闭&#x2F;重启</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rs%E9%87%8D%E5%90%AF"><span class="nav-number">8.1.</span> <span class="nav-text">rs重启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rs%E5%85%B3%E9%97%AD%E4%B8%8B%E7%BA%BF"><span class="nav-number">8.2.</span> <span class="nav-text">rs关闭下线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BB%9A%E5%8A%A8%E9%87%8D%E5%90%AF-rolling-restart-sh"><span class="nav-number">8.3.</span> <span class="nav-text">滚动重启(rolling-restart.sh)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4"><span class="nav-number">9.</span> <span class="nav-text">其它工具命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CreateSnapshot"><span class="nav-number">9.1.</span> <span class="nav-text">CreateSnapshot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SnapshotInfo"><span class="nav-number">9.2.</span> <span class="nav-text">SnapshotInfo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ExportSnapshot"><span class="nav-number">9.3.</span> <span class="nav-text">ExportSnapshot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Export-Import"><span class="nav-number">9.4.</span> <span class="nav-text">Export&#x2F;Import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ImportTsv"><span class="nav-number">9.5.</span> <span class="nav-text">ImportTsv</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LoadIncrementalHFiles"><span class="nav-number">9.6.</span> <span class="nav-text">LoadIncrementalHFiles</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">9.6.1.</span> <span class="nav-text">测试批量导入数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HFile"><span class="nav-number">9.7.</span> <span class="nav-text">HFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CopyTable"><span class="nav-number">9.8.</span> <span class="nav-text">CopyTable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CompactionTool"><span class="nav-number">9.9.</span> <span class="nav-text">CompactionTool</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5-MapReduce-%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C"><span class="nav-number">9.9.1.</span> <span class="nav-text">以 MapReduce 模式运行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HashTable-SyncTable"><span class="nav-number">9.10.</span> <span class="nav-text">HashTable&#x2F;SyncTable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Merge"><span class="nav-number">9.11.</span> <span class="nav-text">Merge</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hbase%E8%84%9A%E6%9C%AC"><span class="nav-number">10.</span> <span class="nav-text">hbase脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5%E8%84%9A%E6%9C%AC%E5%91%BD%E4%BB%A4%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="nav-number">10.1.</span> <span class="nav-text">检查脚本命令的结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E5%91%BD%E4%BB%A4%E6%96%87%E4%BB%B6%E4%B8%AD%E8%AF%BB%E5%8F%96"><span class="nav-number">10.2.</span> <span class="nav-text">从命令文件中读取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86-VM-%E9%80%89%E9%A1%B9%E4%BC%A0%E9%80%92%E7%BB%99-Shell"><span class="nav-number">10.3.</span> <span class="nav-text">将 VM 选项传递给 Shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-HBase-Shell-%E9%A2%84%E6%8B%86%E5%88%86%E8%A1%A8"><span class="nav-number">10.4.</span> <span class="nav-text">使用 HBase Shell 预拆分表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DEBUG-%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="nav-number">10.5.</span> <span class="nav-text">DEBUG 日志级别</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">maoeryu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">220</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://maoeryu.github.io/2022/03/03/hbase%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="maoeryu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FlyingPig">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          hbase客户端命令参数
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-03 00:00:00" itemprop="dateCreated datePublished" datetime="2022-03-03T00:00:00+08:00">2022-03-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2023-02-24 17:24:58" itemprop="dateModified" datetime="2023-02-24T17:24:58+08:00">2023-02-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>hbase工具命令.<br>shell下执行<code>$&#123;HBASE_HOME&#125;/bin/hbase</code>查看.</p>
<span id="more"></span>

<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><code>hbase [&lt;options&gt;] &lt;command&gt; [&lt;args&gt;]</code></p>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">--config DIR</td>
<td align="left">Configuration direction to use. Default: ./conf</td>
</tr>
<tr>
<td align="left">--hosts HOSTS</td>
<td align="left">Override the list in &#39;regionservers&#39; file</td>
</tr>
<tr>
<td align="left">--auth-as-server</td>
<td align="left">Authenticate to ZooKeeper using servers configuration</td>
</tr>
</tbody></table>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p>有些命令接受参数.不传递参数或-h以了解用法.</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">shell</td>
<td align="left">Run the HBase shell</td>
</tr>
<tr>
<td align="left">hbck</td>
<td align="left">Run the hbase &#39;fsck&#39; tool</td>
</tr>
<tr>
<td align="left">snapshot</td>
<td align="left">Create a new snapshot of a table</td>
</tr>
<tr>
<td align="left">snapshotinfo</td>
<td align="left">Tool for dumping snapshot information</td>
</tr>
<tr>
<td align="left">wal</td>
<td align="left">Write-ahead-log analyzer</td>
</tr>
<tr>
<td align="left">hfile</td>
<td align="left">Store file analyzer</td>
</tr>
<tr>
<td align="left">zkcli</td>
<td align="left">Run the ZooKeeper shell</td>
</tr>
<tr>
<td align="left">upgrade</td>
<td align="left">Upgrade hbase</td>
</tr>
<tr>
<td align="left">master</td>
<td align="left">Run an HBase HMaster node</td>
</tr>
<tr>
<td align="left">regionserver</td>
<td align="left">Run an HBase HRegionServer node</td>
</tr>
<tr>
<td align="left">zookeeper</td>
<td align="left">Run a Zookeeper server</td>
</tr>
<tr>
<td align="left">rest</td>
<td align="left">Run an HBase REST server</td>
</tr>
<tr>
<td align="left">thrift</td>
<td align="left">Run the HBase Thrift server</td>
</tr>
<tr>
<td align="left">thrift2</td>
<td align="left">Run the HBase Thrift2 server</td>
</tr>
<tr>
<td align="left">clean</td>
<td align="left">Run the HBase clean up script</td>
</tr>
<tr>
<td align="left">classpath</td>
<td align="left">Dump hbase CLASSPATH</td>
</tr>
<tr>
<td align="left">mapredcp</td>
<td align="left">Dump CLASSPATH entries required by mapreduce</td>
</tr>
<tr>
<td align="left">pe</td>
<td align="left">Run PerformanceEvaluation</td>
</tr>
<tr>
<td align="left">ltt</td>
<td align="left">Run LoadTestTool</td>
</tr>
<tr>
<td align="left">version</td>
<td align="left">Print the version</td>
</tr>
<tr>
<td align="left">CLASSNAME</td>
<td align="left">Run the class named CLASSNAME</td>
</tr>
</tbody></table>
<h2 id="thrift-thrift2"><a href="#thrift-thrift2" class="headerlink" title="thrift/thrift2"></a>thrift/thrift2</h2><h2 id="rest"><a href="#rest" class="headerlink" title="rest"></a>rest</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase rest start</span><br><span class="line">##后台启动,默认8080端口,使用-p更改.</span><br><span class="line">.&#x2F;bin&#x2F;hbase-daemon.sh start rest</span><br><span class="line">.&#x2F;bin&#x2F;hbase-daemon.sh stop rest</span><br></pre></td></tr></table></figure>

<h3 id="集群范围"><a href="#集群范围" class="headerlink" title="集群范围"></a>集群范围</h3><h4 id="version-cluster"><a href="#version-cluster" class="headerlink" title="/version/cluster"></a>/version/cluster</h4><p>GET|此集群上运行的 HBase 版本.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;version&#x2F;cluster&quot;</span><br></pre></td></tr></table></figure>

<h4 id="status-cluster"><a href="#status-cluster" class="headerlink" title="/status/cluster"></a>/status/cluster</h4><p>GET|集群状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;status&#x2F;cluster&quot;</span><br></pre></td></tr></table></figure>

<h4 id=""><a href="#" class="headerlink" title="/"></a>/</h4><p>GET|所有非系统表的列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;&quot;</span><br></pre></td></tr></table></figure>

<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><h4 id="namespaces"><a href="#namespaces" class="headerlink" title="/namespaces"></a>/namespaces</h4><p>GET|列出所有命名空间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;namespaces&#x2F;&quot;</span><br></pre></td></tr></table></figure>

<h4 id="namespaces-namespace"><a href="#namespaces-namespace" class="headerlink" title="/namespaces/namespace"></a>/namespaces/namespace</h4><p>GET|描述一个特定的命名空间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;namespaces&#x2F;special_ns&quot;</span><br></pre></td></tr></table></figure>

<h4 id="namespaces-namespace-1"><a href="#namespaces-namespace-1" class="headerlink" title="/namespaces/namespace"></a>/namespaces/namespace</h4><p>POST|创建一个新的命名空间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X POST \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;example.com:20550&#x2F;namespaces&#x2F;special_ns&quot;</span><br></pre></td></tr></table></figure>

<h4 id="namespaces-namespace-tables"><a href="#namespaces-namespace-tables" class="headerlink" title="/namespaces/namespace/tables"></a>/namespaces/namespace/tables</h4><p>GET|列出特定命名空间中的所有表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;namespaces&#x2F;special_ns&#x2F;tables&quot;</span><br></pre></td></tr></table></figure>

<h4 id="namespaces-namespace-2"><a href="#namespaces-namespace-2" class="headerlink" title="/namespaces/namespace"></a>/namespaces/namespace</h4><p>PUT|更改现有名称空间,目前没有使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;namespaces&#x2F;special_ns&quot;</span><br></pre></td></tr></table></figure>

<h4 id="namespaces-namespace-3"><a href="#namespaces-namespace-3" class="headerlink" title="/namespaces/namespace"></a>/namespaces/namespace</h4><p>DELETE|删除命名空间,命名空间必须为空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X DELETE \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;example.com:20550&#x2F;namespaces&#x2F;special_ns&quot;</span><br></pre></td></tr></table></figure>

<h3 id="表"><a href="#表" class="headerlink" title="表"></a>表</h3><h4 id="table-schema"><a href="#table-schema" class="headerlink" title="/table/schema"></a>/table/schema</h4><p>GET|描述指定表的架构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;schema&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-schema-1"><a href="#table-schema-1" class="headerlink" title="/table/schema"></a>/table/schema</h4><p>POST|创建一个新表,或用提供的模式替换现有表的模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X POST \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">-H &quot;Content-Type: text&#x2F;xml&quot; \</span><br><span class="line">-d &#39;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;&lt;TableSchema name&#x3D;&quot;users&quot;&gt;&lt;ColumnSchema name&#x3D;&quot;cf&quot; &#x2F;&gt;&lt;&#x2F;TableSchema&gt;&#39; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;schema&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-schema-2"><a href="#table-schema-2" class="headerlink" title="/table/schema"></a>/table/schema</h4><p>UPDATE|使用提供的架构片段更新现有表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">-H &quot;Content-Type: text&#x2F;xml&quot; \</span><br><span class="line">-d &#39;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;&lt;TableSchema name&#x3D;&quot;users&quot;&gt;&lt;ColumnSchema name&#x3D;&quot;cf&quot; KEEP_DELETED_CELLS&#x3D;&quot;true&quot; &#x2F;&gt;&lt;&#x2F;TableSchema&gt;&#39; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;schema&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-schema-3"><a href="#table-schema-3" class="headerlink" title="/table/schema"></a>/table/schema</h4><p>DELETE|删除表,你必须使用<code>table/schema</code>,不只是<code>table/</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X DELETE \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;schema&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-regions"><a href="#table-regions" class="headerlink" title="/table/regions"></a>/table/regions</h4><p>GET|列出表格区域</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;regions&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Get操作"><a href="#Get操作" class="headerlink" title="Get操作"></a>Get操作</h3><h4 id="table-row-column-qualifier-timestamp"><a href="#table-row-column-qualifier-timestamp" class="headerlink" title="/table/row/column:qualifier/timestamp"></a>/table/row/column:qualifier/timestamp</h4><p>GET|获取单行的值,值是 Base-64 编码的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">##最新版本</span><br><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;row1&quot;</span><br><span class="line"></span><br><span class="line">##具体时间戳</span><br><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;row1&#x2F;cf:a&#x2F;1458586888395&quot;</span><br></pre></td></tr></table></figure>

<p>获取单个列的值,值是 Base-64 编码的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">##最新版本</span><br><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;row1&#x2F;cf:a&quot;</span><br><span class="line"></span><br><span class="line">##具体时间戳</span><br><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;row1&#x2F;cf:a&#x2F;&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-row-column-qualifier-v-number-of-versions"><a href="#table-row-column-qualifier-v-number-of-versions" class="headerlink" title="/table/row/column:qualifier?v=number_of_versions"></a>/table/row/column:qualifier?v=number_of_versions</h4><p>|Multi-Get给定单元格的指定数量的版本,值是 Base-64 编码的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;row1&#x2F;cf:a?v&#x3D;2&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Scan操作"><a href="#Scan操作" class="headerlink" title="Scan操作"></a>Scan操作</h3><h4 id="table-scanner"><a href="#table-scanner" class="headerlink" title="/table/scanner/"></a>/table/scanner/</h4><p>PUT|获取扫描仪对象,所有其他扫描操作都需要,将批处理参数调整为扫描应在批处理中返回的行数,请参阅下一个示例,了解如何将过滤器添加到您的扫描仪,扫描器端点 URL 作为地点在 HTTP 响应中,此表中的其他示例假定扫描程序端点是<code>http://example.com:20550/users/scanner/145869072824375522207</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">-H &quot;Content-Type: text&#x2F;xml&quot; \</span><br><span class="line">-d &#39;&lt;Scanner batch&#x3D;&quot;1&quot;&#x2F;&gt;&#39; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;scanner&#x2F;&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-scanner-1"><a href="#table-scanner-1" class="headerlink" title="/table/scanner/"></a>/table/scanner/</h4><p>PUT|要为扫描器对象提供过滤器或以任何其他方式配置扫描器,您可以创建一个文本文件并将过滤器添加到该文件.例如,仅返回键以开头的行u123并使用 100 的批量大小(将文件传递给<code>-d</code>参数).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Scanner batch&#x3D;&quot;100&quot;&gt;</span><br><span class="line">  &lt;filter&gt;</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;PrefixFilter&quot;,</span><br><span class="line">      &quot;value&quot;: &quot;u123&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;&#x2F;filter&gt;</span><br><span class="line">&lt;&#x2F;Scanner&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">-H &quot;Content-Type:text&#x2F;xml&quot; \</span><br><span class="line">-d @filter.txt \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;scanner&#x2F;&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-scanner-scanner-id"><a href="#table-scanner-scanner-id" class="headerlink" title="/table/scanner/scanner_id"></a>/table/scanner/scanner_id</h4><p>GET|从扫描仪获取下一批,单元格值是字节编码的,如果扫描器耗尽,HTTP 状态204被退回</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -vi -X GET \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;scanner&#x2F;145869072824375522207&quot;</span><br></pre></td></tr></table></figure>

<h4 id="table-scanner-scanner-id-1"><a href="#table-scanner-scanner-id-1" class="headerlink" title="/table/scanner/scanner_id"></a>/table/scanner/scanner_id</h4><p>DELETE|删除扫描仪并释放它正在使用的资源</p>
<figure class="highlight plain"><figcaption><span>-vi -X DELETE \</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;scanner&#x2F;145869072824375522207&quot;</span><br></pre></td></tr></table></figure>

<h3 id="Put操作"><a href="#Put操作" class="headerlink" title="Put操作"></a>Put操作</h3><h4 id="table-row-key"><a href="#table-row-key" class="headerlink" title="/table/row_key/"></a>/table/row_key/</h4><p>PUT|向表中写入一行,行/列限定符和值都必须采用 Base-64 编码,要对字符串进行编码,您可以使用 base64命令行实用程序,要解码字符串,请使用<code>base64 -d</code>.有效负载在 <code>--data</code> 参数中,因此<code>/users/fakerow</code>是一个占位符,通过将它们添加到<code>&lt;CellSet&gt;</code>元素,也可以将要插入的数据保存到文件中,传递给<code>-d</code>语法参数(<code>-d @文件名.txt</code>).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">##XML</span><br><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;xml&quot; \</span><br><span class="line">-H &quot;Content-Type: text&#x2F;xml&quot; \</span><br><span class="line">-d &#39;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; standalone&#x3D;&quot;yes&quot;?&gt;&lt;CellSet&gt;&lt;Row key&#x3D;&quot;cm93NQo&#x3D;&quot;&gt;&lt;Cell column&#x3D;&quot;Y2Y6ZQo&#x3D;&quot;&gt;dmFsdWU1Cg&#x3D;&#x3D;&lt;&#x2F;Cell&gt;&lt;&#x2F;Row&gt;&lt;&#x2F;CellSet&gt;&#39; \</span><br><span class="line">&quot;http:&#x2F;&#x2F;example.com:20550&#x2F;users&#x2F;fakerow&quot;</span><br><span class="line"></span><br><span class="line">##JSON:</span><br><span class="line">curl -vi -X PUT \</span><br><span class="line">-H &quot;Accept: text&#x2F;json&quot; \</span><br><span class="line">-H &quot;Content-Type: text&#x2F;json&quot; \</span><br><span class="line">-d &#39;&#123;&quot;Row&quot;:[&#123;&quot;key&quot;:&quot;cm93NQo&#x3D;&quot;, &quot;Cell&quot;: [&#123;&quot;column&quot;:&quot;Y2Y6ZQo&#x3D;&quot;, &quot;$&quot;:&quot;dmFsdWU1Cg&#x3D;&#x3D;&quot;&#125;]&#125;]&#125;&#39;&#39; \</span><br><span class="line">&quot;example.com:20550&#x2F;users&#x2F;fakerow&quot;</span><br></pre></td></tr></table></figure>

<h2 id="hbck"><a href="#hbck" class="headerlink" title="hbck"></a>hbck</h2><p>是一个用于检查区域一致性和表完整性问题并修复损坏的工具.</p>
<ol>
<li>HBase Region一致性<br>集群中所有region都被assign,而且deploy到唯一一台RegionServer上,该region的状态在内存中/hbase:meta表中以及zookeeper这三个地方需要保持一致.</li>
<li>HBase 表完整性<br>对于集群中任意一张表,每个rowkey都仅能存在于一个region区间.</li>
</ol>
<h3 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h3><h4 id="通用选项"><a href="#通用选项" class="headerlink" title="通用选项"></a>通用选项</h4><p>Allow checking/fixes for table: fsck<br><code>Usage: fsck [opts] &#123;only tables&#125;</code><br><code>where [opts] are:</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-help</td>
<td align="left">帮助信息</td>
</tr>
<tr>
<td align="left">-details</td>
<td align="left">显示所有Region的详情</td>
</tr>
<tr>
<td align="left">-timelag <code>&lt;timeInSeconds&gt;</code></td>
<td align="left">处理在过去的指定时间内没有发生过元数据更新的region,秒级时间</td>
</tr>
<tr>
<td align="left">-sleepBeforeRerun <code>&lt;timeInSeconds&gt;</code></td>
<td align="left">在执行-fix指令后时睡眠指定的时间后再检查fix是否生效,秒级时间</td>
</tr>
<tr>
<td align="left">-summary</td>
<td align="left">只打印表和状态的概要信息</td>
</tr>
<tr>
<td align="left">-metaonly</td>
<td align="left">只检查hbase:meta表的状态</td>
</tr>
<tr>
<td align="left">-sidelineDir <code>&lt;hdfs://&gt;</code></td>
<td align="left">备份当前的元数据到HDFS上</td>
</tr>
<tr>
<td align="left">-boundaries</td>
<td align="left">校验META表和StoreFiles的Region边界是否一致</td>
</tr>
<tr>
<td align="left">-exclusive</td>
<td align="left">如果另一个hbck是独占的或固定的,则中止</td>
</tr>
<tr>
<td align="left">-disableBalancer</td>
<td align="left">禁用负载平衡器</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck fsck -summary xx1</span><br><span class="line">#检查集群是否损坏</span><br><span class="line">.&#x2F;bin&#x2F;hbase hbck</span><br><span class="line">#只检查元数据表的状态</span><br><span class="line">.&#x2F;bin&#x2F;hbase hbck -metaonly</span><br><span class="line">#只检查xx1表</span><br><span class="line">.&#x2F;bin&#x2F;hbase hbck xx1</span><br><span class="line">#包括正在进行的split任务</span><br><span class="line">.&#x2F;bin&#x2F;hbase hbck -details</span><br></pre></td></tr></table></figure>

<p>Status: OK,表示没有发现不一致问题.<br>Status: INCONSISTENT,表示有不一致问题.</p>
<h4 id="元数据修复选项"><a href="#元数据修复选项" class="headerlink" title="元数据修复选项"></a>元数据修复选项</h4><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-fix</td>
<td align="left">尝试修复Region的分配,通常用于向后兼容</td>
</tr>
<tr>
<td align="left">-fixAssignments</td>
<td align="left">修复region没有分配(unassigned),错误分配(incorrectly assigned)以及多次分配(multiply assigned)的问题,用来替换-fix指令</td>
</tr>
<tr>
<td align="left">-fixMeta</td>
<td align="left">删除META表里有记录但HDFS里没有数据记录的region,添加HDFS里有数据但是META表里没有记录的region到META表</td>
</tr>
<tr>
<td align="left">-noHdfsChecking</td>
<td align="left">不从HDFS加载/检查Region信息,这里假设hbase:meta表中的Region信息是正确的,</br>不会在检查或修复任何HDFS相关的问题,如黑洞(hole)/孤岛(orphan)或是重叠(overlap)</td>
</tr>
<tr>
<td align="left">-fixHdfsHoles</td>
<td align="left">如果rowkey出现空洞,即相邻的两个region的rowkey不连续,则使用这个参数会在HDFS里面创建一个新的region.</br>创建新的region之后要使用-fixMeta和-fixAssignments参数来使用挂载这个region,所以一般和前两个参数一起使用</td>
</tr>
<tr>
<td align="left">-fixHdfsOrphans</td>
<td align="left">将文件系统中的没有metadata文件(.regioninfo)的region目录加入到hbase中,即创建.regioninfo目录并将region分配到regionser</td>
</tr>
<tr>
<td align="left">-fixTableOrphans</td>
<td align="left">尝试修复hdfs中没有.tableinfo文件的table目录(只支持在线模式)</td>
</tr>
<tr>
<td align="left">-fixHdfsOverlaps</td>
<td align="left">通过两种方式可以将rowkey有重叠的region合并:</br>1)merge:将重叠的region合并成一个大的region</br>2)sideline:将region重叠的部分去掉,并将重叠的数据先写入到临时文件,然后再导入进来.</br>如果重叠的数据很大,直接合并成一个大的region会产生大量的split和compact操作,可以通过以下参数控制region过大:</br>-maxMerge <code>&lt;n&gt;</code> 合并重叠region的最大数量</br>-sidelineBigOverlaps 如有大于maxMerge个数的region重叠,则采用sideline方式处理与其它region的重叠.</br>-maxOverlapsToSideline <code>&lt;n&gt;</code> 如果用sideline方式处理重叠region,最多sideline n个region</td>
</tr>
<tr>
<td align="left">-fixVersionFile</td>
<td align="left">Hbase的数据文件启动时需要一个version file,如果这个文件丢失,可以用这个命令来新建一个,但是要保证hbck的版本和Hbase集群的版本是一样的</td>
</tr>
<tr>
<td align="left">-maxMerge <code>&lt;n&gt;</code></td>
<td align="left">在修复region重叠的现时,允许merge最多<code>&lt;n&gt;</code>个region(默认n等于5)</td>
</tr>
<tr>
<td align="left">-sidelineBigOverlaps</td>
<td align="left">在修复region重叠问题时,允许暂时搁置重叠量较大的部分</td>
</tr>
<tr>
<td align="left">-maxOverlapsToSideline <code>&lt;n&gt;</code></td>
<td align="left">在修复region重叠问题时,允许一组里暂时搁置最多n个region不处理(默认n等于2)</td>
</tr>
<tr>
<td align="left">-fixSplitParents</td>
<td align="left">当region做split操作的时候,父region会被自动清除掉.但是有时候子region在父region被清除之前又做了split.造成有些延迟离线的父region存在于META表和HDFS中,但是没有部署,HBASE又不能清除他们.这种情况下可以使用此命令重置这些在META表中的region为在线状态并且没有split.然后就可以使用之前的修复命令把这个region修复</td>
</tr>
<tr>
<td align="left">-removeParents</td>
<td align="left">在执行检查时忽略文件系统权限</td>
</tr>
<tr>
<td align="left">-ignorePreCheckPermission</td>
<td align="left">尝试下线引用断开(lingering reference)的StoreFile</td>
</tr>
<tr>
<td align="left">-fixReferenceFiles</td>
<td align="left">尝试下线引用断开(lingering reference)的StoreFile</td>
</tr>
<tr>
<td align="left">-fixEmptyMetaCells</td>
<td align="left">尝试修复hbase:meta表中没有引用到任何region的entry(REGIONINFO_QUALIFIER为空的行)</td>
</tr>
</tbody></table>
<h4 id="Datafile修复选项"><a href="#Datafile修复选项" class="headerlink" title="Datafile修复选项"></a>Datafile修复选项</h4><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-checkCorruptHFiles</td>
<td align="left">检查所有HFile,通过逐一打开所有的HFile来确定其是否可用</td>
</tr>
<tr>
<td align="left">-sidelineCorruptHFiles</td>
<td align="left">隔离损坏的HFile,该指令中包含-checkCorruptHFiles操作</td>
</tr>
</tbody></table>
<h4 id="Meta修复快捷指令"><a href="#Meta修复快捷指令" class="headerlink" title="Meta修复快捷指令"></a>Meta修复快捷指令</h4><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-repair</td>
<td align="left">是以下指令的简写:-fixAssignments -fixMeta -fixHdfsHoles -fixHdfsOrphans -fixHdfsOverlaps -fixVersionFile -sidelineBigOverlaps -fixReferenceFiles -fixTableLocks -fixOrphanedTableZnodes,后面可以指定1个或多个表名</td>
</tr>
<tr>
<td align="left">-repairHoles</td>
<td align="left">是以下指令的简写:-fixAssignments -fixMeta -fixHdfsHoles</td>
</tr>
</tbody></table>
<h4 id="Table-lock选项"><a href="#Table-lock选项" class="headerlink" title="Table lock选项"></a>Table lock选项</h4><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-fixTableLocks</td>
<td align="left">删除已持有超过很长时间的table lock(hbase.table.lock.expire.ms配置项,默认值为10分钟)</td>
</tr>
</tbody></table>
<h4 id="Znode选项"><a href="#Znode选项" class="headerlink" title="Znode选项"></a>Znode选项</h4><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-fixOrphanedTableZnodes</td>
<td align="left">如果表不存在,则将其在zookeeper中ZNode状态设置为disabled</td>
</tr>
</tbody></table>
<h3 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h3><h4 id="运行-hbck-以识别不一致"><a href="#运行-hbck-以识别不一致" class="headerlink" title="运行 hbck 以识别不一致"></a>运行 hbck 以识别不一致</h4><p>要检查您的 HBase 集群是否有损坏,请对您的 HBase 集群运行 hbck:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck</span><br></pre></td></tr></table></figure>

<p>在命令输出的末尾,它会打印 OK 或告诉您存在的 INCONSISTENCIES 数量.<br>您可能还想运行 hbck 几次,因为一些不一致可能是暂时的(例如集群正在启动或区域正在分裂).<br>在操作上,您可能希望定期运行 hbck 并在它反复报告不一致时设置警报(例如通过 nagios).<br>运行 hbck 将报告不一致列表以及受影响的区域和表的简要说明.<br>使用该<code>-details</code>选项将报告更多详细信息,包括所有表中存在的所有拆分的代表性列表.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -details</span><br></pre></td></tr></table></figure>

<p>如果您只想知道某些表是否已损坏,您可以限制 hbck 仅识别特定表中的不一致.<br>例如,以下命令只会尝试检查表 TableFoo 和 TableBar.<br>好处是 hbck 将在更短的时间内运行.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck TableFoo TableBar</span><br></pre></td></tr></table></figure>

<h4 id="不一致"><a href="#不一致" class="headerlink" title="不一致"></a>不一致</h4><p>如果在几次运行后,继续报告不一致,您可能遇到了损坏.<br>这些应该很少见,但如果它们发生,较新版本的 HBase 包括启用了自动修复选项的 hbck 工具.</p>
<p>有两个不变量在违反时会在 HBase 中造成不一致:</p>
<ol>
<li>如果每个区域都分配并部署在恰好一个区域服务器上,并且该状态保存的所有位置都一致,则满足 HBase 的区域一致性不变式.</li>
<li>如果对于每个表,每个可能的行键都恰好解析为一个区域,则满足 HBase 的表完整性不变式.</li>
</ol>
<p>修复通常分三个阶段进行——识别不一致的只读信息收集阶段,恢复表完整性不变性的表完整性修复阶段,最后是恢复区域一致性不变性的区域一致性修复阶段.<br>从版本 0.90.0 开始,hbck 可以检测区域一致性问题,报告可能存在的表完整性问题的子集.<br>它还包括自动修复最常见的不一致/区域分配和部署一致性问题的能力.<br>此修复可以通过使用命令行选项来完成<code>-fix</code>.<br>如果区域在错误的服务器或多个区域服务器上打开,这些问题会关闭区域,如果区域未打开,也会将区域分配给区域服务器.</p>
<p>从 HBase 版本 0.90.7/0.92.2 和 0.94.0 开始,引入了几个新的命令行选项来帮助修复损坏的 HBase.<br>这个 hbck 有时被昵称为&quot;uberhbck&quot;.<br>uber hbck 的每个特定版本都与相同主要版本的 HBase 兼容(0.90.7 uberhbck 可以修复 0.90.4).<br>但是,版本 ⇐0.90.6 和版本 ⇐0.92.1 可能需要重新启动 master 或故障转移到备份 master.</p>
<h4 id="本地化维修"><a href="#本地化维修" class="headerlink" title="本地化维修"></a>本地化维修</h4><p>修复损坏的 HBase 时,最好先修复风险最低的不一致.<br>这些通常是区域一致性修复——本地化的单区域修复,只修改内存中的数据/短暂的 zookeeper 数据或 META 表中的补丁漏洞.<br>区域一致性要求 HBase 实例具有 HDFS 中区域数据的状态(.regioninfo 文件)/区域在 hbase:meta 表中的行以及区域在区域服务器和主服务器上的部署/分配.<br>修复区域一致性的选项包括:</p>
<ol>
<li><code>-fixAssignments</code>(相当于 0.90 -fix选项)修复未指定/错误指定或多重指定的区域.</li>
<li><code>-fixMeta</code>当相应的区域不在 HDFS 中时,它会删除元行,如果这些区域存在于 HDFS 而不在 META 中,则会添加新的元行.<br>要修复部署和分配问题,您可以运行此命令:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -fixAssignments</span><br></pre></td></tr></table></figure>
要修复部署和分配问题以及修复不正确的元行,您可以运行此命令:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -fixAssignments -fixMeta</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>有几类表完整性问题是低风险修复.<br>前两个是退化(startkey == endkey)区域和向后区域(startkey &gt; endkey).<br>这些是通过将数据放在临时目录 (/hbck/xxxx) 中自动处理的.<br>第三个低风险类是 hdfs region holes.<br>这可以通过使用以下方法修复:</p>
<ol>
<li><code>-fixHdfsHoles</code>用于在文件系统上制造新的空白区域的选项.<br>如果检测到漏洞,您可以使用 -fixHdfsHoles 并且应该包括 -fixMeta 和 -fixAssignments 以使新区域保持一致.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -fixAssignments -fixMeta -fixHdfsHoles</span><br></pre></td></tr></table></figure>

<p>由于这是一个常见的操作,我们添加了一个<code>-repairHoles</code>等同于上一个命令的标志:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -repairHoles</span><br></pre></td></tr></table></figure>

<p>如果在这些步骤之后仍然存在不一致,您很可能遇到与孤立或重叠区域相关的表完整性问题.</p>
<h4 id="区域重叠修复"><a href="#区域重叠修复" class="headerlink" title="区域重叠修复"></a>区域重叠修复</h4><p>表完整性问题可能需要处理重叠的修复.<br>这是一个风险较高的操作,因为它需要修改文件系统,需要做出一些决策,并且可能需要一些手动步骤.<br>对于这些修复,最好分析<code>hbck -details</code> 运行的输出,以便仅在检查发现问题时隔离修复尝试.<br>因为这风险更大,所以应该使用保护措施来限制维修范围.<br>警告:这是一个相对较新的方法,仅在在线但空闲的 HBase 实例(无读/写)上进行过测试.<br>在活跃的生产环境中使用风险自负！修复表完整性违规的选项包括:</p>
<ol>
<li><code>-fixHdfsOrphans</code> &quot;采用&quot;缺少区域元数据文件(.regioninfo 文件)的区域目录的选项.</li>
<li><code>-fixHdfsOverlaps</code> 修复重叠区域的能力</li>
</ol>
<p>修复重叠区域时,可以通过两种方式在文件系统上修改区域的数据:</p>
<ol>
<li>通过将区域合并到更大的区域或 </li>
<li>通过将数据移动到稍后可以恢复数据的&quot;副业&quot;目录来将区域副业化.</li>
</ol>
<p>合并大量区域在技术上是正确的,但可能会导致一个非常大的区域,需要一系列代价高昂的压缩和拆分操作.<br>在这些情况下,最好将与大多数其他区域(可能是最大范围)重叠的区域放在一边,以便合并可以在更合理的范围内发生.<br>由于这些被边缘化的区域已经在HBase的原生目录和HFile格式中进行了布局,因此可以使用HBase的批量加载机制来恢复它们.<br>默认的保护阈值是保守的.</p>
<ol>
<li><code>-maxMerge &lt;n&gt;</code>要合并的最大重叠区域数</li>
<li><code>-sidelineBigOverlaps</code> 如果超过 maxMerge 区域重叠,则边线尝试将与大多数其他区域重叠的区域排在一边.</li>
<li><code>-maxOverlapsToSideline &lt;n&gt;</code> 如果搁置大的重叠区域,则最多搁置 n 个区域.</li>
</ol>
<p>由于很多时候您只想修复表,因此可以使用此选项打开所有修复选项:</p>
<ol>
<li><code>-repair</code>包括所有区域一致性选项和仅孔修复表完整性选项.</li>
</ol>
<p>最后,有一些保护措施可以限制对特定表的修复.<br>例如,以下命令只会尝试检查和修复表 TableFoo 和 TableBar.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -repair TableFoo TableBar</span><br></pre></td></tr></table></figure>

<h5 id="Meta-未正确分配"><a href="#Meta-未正确分配" class="headerlink" title="Meta 未正确分配"></a>Meta 未正确分配</h5><p>hbck 也可以处理一些特殊情况.<br>有时,元表的唯一区域分配或部署不一致.<br>在这种情况下,有一个特殊<code>-fixMetaOnly</code>选项可以尝试修复元分配.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase hbck -fixMetaOnly -fixAssignments</span><br></pre></td></tr></table></figure>

<h5 id="HBase-版本文件丢失"><a href="#HBase-版本文件丢失" class="headerlink" title="HBase 版本文件丢失"></a>HBase 版本文件丢失</h5><p>HBase 在文件系统上的数据需要版本文件才能启动.<br>如果缺少此文件,您可以使用该<code>-fixVersionFile</code>选项来制作新的 HBase 版本文件.<br>这假定您运行的 hbck 版本是适用于 HBase 集群的版本.</p>
<h5 id="Root-和-META-已损坏"><a href="#Root-和-META-已损坏" class="headerlink" title="Root 和 META 已损坏."></a>Root 和 META 已损坏.</h5><p>最严重的损坏情况是 ROOT 或 META 损坏并且 HBase 无法启动的情况.<br>在这种情况下,您可以使用 <code>OfflineMetaRepair</code> 工具创建新的 ROOT 和 META 区域和表.<br>此工具假定 HBase 处于离线状态.<br>然后它遍历现有的 HBase 主目录,从文件系统中加载尽可能多的区域元数据文件(.regioninfo 文件)信息.<br>如果区域元数据具有适当的表完整性,它会将原始根目录和元表目录放在一边,并使用指向区域目录及其数据的指针构建新目录.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.util.hbck.OfflineMetaRepair</span><br></pre></td></tr></table></figure>

<p>这个工具不像 uberhbck 那样聪明,但可以用来引导 uberhbck 可以完成的修复.<br>如果该工具成功,您应该能够启动 hbase 并在必要时运行在线修复.</p>
<h5 id="离线拆分父级"><a href="#离线拆分父级" class="headerlink" title="离线拆分父级"></a>离线拆分父级</h5><p>一旦一个区域被分割,离线的父级将被自动清理.<br>有时,子区域会在其父区域被清理之前再次分裂.<br>HBase 可以按正确的顺序清理父母.<br>但是,有时可能会有一些挥之不去的离线分裂父母.<br>它们在 META 中,在 HDFS 中,但未部署.<br>但是 HBase 无法清理它们.<br>在这种情况下,您可以使用<code>-fixSplitParentsMETA</code> 中的选项将它们重置为联机且不拆分.<br>因此,如果使用修复重叠区域选项,hbck 可以将它们与其他区域合并.</p>
<p>通常不应使用此选项,它不在<code>-fixAll</code>.</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><img src="/images/hbq6.png" style="margin-left: 0px; padding-bottom: 10px;">
<img src="/images/hbq7.png" style="margin-left: 0px; padding-bottom: 10px;">

<h2 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h2><p>从 ZooKeeper/HDFS/两者中清除 HBase 数据,适合用于测试.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Usage: hbase clean (--cleanZk|--cleanHdfs|--cleanAll)</span><br><span class="line">Options: </span><br><span class="line">        --cleanZk   cleans hbase related data from zookeeper.</span><br><span class="line">        --cleanHdfs cleans hbase related data from hdfs.</span><br><span class="line">        --cleanAll  cleans hbase related data from both zookeeper and hdfs.</span><br></pre></td></tr></table></figure>

<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p>输入&#39;help &quot;COMMAND&quot;&#39;(例如&#39;help &quot;get&quot;&#39;--引号是必需的)以获取有关特定命令的帮助.<br>命令已分组.<br>输入&#39;help &quot;COMMAND_GROUP&quot;&#39;(例如&#39;help &quot;general&quot;&#39;)以获取命令组的帮助.</p>
<p>创建和更改表时使用的配置字典如下:<code>&#123;&#39;key1&#39; =&gt; &#39;value1&#39;, &#39;key2&#39; =&gt; &#39;value2&#39;, ...&#125;</code><br>键/值由&quot;=&gt;&quot;字符组合.</p>
<p>如果使用的是二进制键或值,并且需要在shell中输入它们,请使用双引号的十六进制表示法,例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get &#39;t1&#39;, &quot;key\x03\x3f\xcd&quot;</span><br><span class="line">get &#39;t1&#39;, &quot;key\003\023\011&quot;</span><br><span class="line">put &#39;t1&#39;, &quot;test\xef\xff&quot;, &#39;f1:&#39;, &quot;\x01\x33\x40&quot;</span><br></pre></td></tr></table></figure>

<h3 id="general"><a href="#general" class="headerlink" title="general"></a>general</h3><h4 id="status"><a href="#status" class="headerlink" title="status"></a>status</h4><p>显示群集状态.<br>可以是&quot;摘要(summary)&quot;/&quot;简单(simple)&quot;/&quot;详细(detailed)&quot;/&quot;复制(replication)&quot;.<br>这个默认值为&quot;summary&quot;.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">status</span><br><span class="line">status &#x27;simple&#x27;</span><br><span class="line">status &#x27;summary&#x27;</span><br><span class="line">status &#x27;detailed&#x27;</span><br><span class="line">status &#x27;replication&#x27;</span><br><span class="line">status &#x27;replication&#x27;, &#x27;source&#x27;</span><br><span class="line">status &#x27;replication&#x27;, &#x27;sink&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="table-help"><a href="#table-help" class="headerlink" title="table_help"></a>table_help</h4><p>表引用命令的帮助.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">t = create &#x27;t&#x27;, &#x27;cf&#x27;</span><br><span class="line">t = get_table &#x27;t&#x27;</span><br><span class="line">t.put &#x27;r&#x27;, &#x27;cf:q&#x27;, &#x27;v&#x27;</span><br><span class="line">t.scan</span><br><span class="line">t.help &#x27;scan&#x27;</span><br><span class="line">t.enable</span><br><span class="line">t.flush</span><br><span class="line">t.disable</span><br><span class="line">t.drop</span><br></pre></td></tr></table></figure>

<h4 id="version"><a href="#version" class="headerlink" title="version"></a>version</h4><p>输出此HBase版本.</p>
<h4 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h4><p>显示当前hbase用户.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br></pre></td></tr></table></figure>

<h3 id="ddl"><a href="#ddl" class="headerlink" title="ddl"></a>ddl</h3><h4 id="alter"><a href="#alter" class="headerlink" title="alter"></a>alter</h4><p>更改表格.<br>如果&quot;hbase.online.schema.update.enable&quot;属性设置为false,则必须禁用该表(请参阅帮助&quot;disable&quot;).<br>如果&quot;hbase.online.schema.update.enable&quot;属性设置为true,表可以更改而不用禁用它们.<br>更改已启用的表会导致问题.</p>
<p>您可以使用alter命令添加,修改或删除列族或更改表配置选项.<br>列族的工作方式与&quot;create&quot;命令类似.<br>列族规范可以是名称字符串,也可以是具有name属性的字典.<br>字典在&quot;help&quot;命令的输出中描述,没有参数.</p>
<p>例如,要从中更改或添加表&#39;t1&#39;中的&#39;f1&#39;列族,保持最大5个单元格版本的当前值,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 5</span><br></pre></td></tr></table></figure>

<p>可以对多个列族进行操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, &#x27;f1&#x27;, &#123;NAME =&gt; &#x27;f2&#x27;, IN_MEMORY =&gt; true&#125;, &#123;NAME =&gt; &#x27;f3&#x27;, VERSIONS =&gt; 5&#125;</span><br></pre></td></tr></table></figure>

<p>删除表&#39;ns1:t1&#39;中的&#39;f1&#39;列族.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;ns1:t1&#x27;, NAME =&gt; &#x27;f1&#x27;, METHOD =&gt; &#x27;delete&#x27;</span><br><span class="line">alter &#x27;ns1:t1&#x27;, &#x27;delete&#x27; =&gt; &#x27;f1&#x27;</span><br></pre></td></tr></table></figure>

<p>还可以更改表范围属性,如MAX_FILESIZE/READONLY/MEMSTORE_FLUSSIZE/DURATILITY等.<br>这些可以放在末尾.</p>
<p>例如,要将区域的最大大小更改为128MB,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, MAX_FILESIZE =&gt; &#x27;134217728&#x27;</span><br></pre></td></tr></table></figure>

<p>可以通过设置表协处理器属性来添加表协处理器:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, &#x27;coprocessor&#x27;=&gt;&#x27;hdfs:///foo.jar|com.foo.FooRegionObserver|1001|arg1=1,arg2=2&#x27;</span><br></pre></td></tr></table></figure>

<p>由于可以为一个表配置多个协处理器,序列号将自动附加到属性名称,以唯一地识别它.<br>协处理器属性必须与以下模式匹配,以便了解如何加载协处理器类的框架:<br><code>[协处理器jar文件位置]|类名|[优先级]|[参数]</code></p>
<p>还可以设置特定于此表或列族的配置设置:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, CONFIGURATION =&gt; &#123;&#x27;hbase.hregion.scan.loadColumnFamiliesOnDemand&#x27; =&gt; &#x27;true&#x27;&#125;</span><br><span class="line">alter &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f2&#x27;, CONFIGURATION =&gt; &#123;&#x27;hbase.hstore.blockingStoreFiles&#x27; =&gt; &#x27;10&#x27;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>还可以删除表范围属性:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, METHOD =&gt; &#x27;table_att_unset&#x27;, NAME =&gt; &#x27;MAX_FILESIZE&#x27;</span><br><span class="line">alter &#x27;t1&#x27;, METHOD =&gt; &#x27;table_att_unset&#x27;, NAME =&gt; &#x27;coprocessor$1&#x27;</span><br></pre></td></tr></table></figure>

<p>也可以设置REGION_REPLICATION:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, &#123;REGION_REPLICATION =&gt; 2&#125;</span><br></pre></td></tr></table></figure>

<p>一个命令中可能有多个更改:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, &#123; NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 3 &#125;, &#123; MAX_FILESIZE =&gt; &#x27;134217728&#x27; &#125;, &#123; METHOD =&gt; &#x27;delete&#x27;, NAME =&gt; &#x27;f2&#x27; &#125;, OWNER =&gt; &#x27;johndoe&#x27;, METADATA =&gt; &#123; &#x27;mykey&#x27; =&gt; &#x27;myvalue&#x27; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="alter-async"><a href="#alter-async" class="headerlink" title="alter_async"></a>alter_async</h4><p>更改列族架构,不等待所有区域接收模式更改.<br>传递表名和指定新列的字典家庭模式.<br>字典在主帮助命令输出中描述.</p>
<p>字典必须包含要更改的列族的名称.<br>例如:<br>从默认值更改或添加表&#39;t1&#39;中的&#39;f1&#39;列族,要保持最多5个单元格版本,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter_async &#x27;t1&#x27;, NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 5</span><br></pre></td></tr></table></figure>

<p>要删除表&#39;ns1:t1&#39;中的&#39;f1&#39;列族,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter_async &#x27;ns1:t1&#x27;, NAME =&gt; &#x27;f1&#x27;, METHOD =&gt; &#x27;delete&#x27;</span><br><span class="line">alter_async &#x27;ns1:t1&#x27;, &#x27;delete&#x27; =&gt; &#x27;f1&#x27;</span><br></pre></td></tr></table></figure>

<p>还可以更改表范围属性,如MAX_FILESIZE/MEMSTORE_FLUHSIZE/READONLY/DEFRRED_LOG_FLUSH.<br>例如,要将族的最大大小更改为128MB,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, METHOD =&gt; &#x27;table_att&#x27;, MAX_FILESIZE =&gt; &#x27;134217728&#x27;</span><br></pre></td></tr></table></figure>

<p>一个命令中可能有多个更改:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;&#125;, &#123;NAME =&gt; &#x27;f2&#x27;, METHOD =&gt; &#x27;delete&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>要检查是否所有区域都已更新,请使用<code>alter_status &lt;table_name&gt;</code></p>
<h4 id="alter-status"><a href="#alter-status" class="headerlink" title="alter_status"></a>alter_status</h4><p>获取alter命令的状态.指示已接收更新架构的表.<br>传递表名称.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter_status &#x27;t1&#x27;</span><br><span class="line">alter_status &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="create"><a href="#create" class="headerlink" title="create"></a>create</h4><p>创建表.<br>传递表名和一组列族规范(至少一个),以及可选的表配置.<br>列规范可以是简单的字符串(名称)或字典(字典在下面的主要帮助输出中描述),包括NAME属性.<br>示例:<br>创建namespace=ns1且表qualifier=t1的表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create &#x27;ns1:t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 5&#125;</span><br></pre></td></tr></table></figure>

<p>创建namespace=default且表qualifier=t1的表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;&#125;, &#123;NAME =&gt; &#x27;f2&#x27;&#125;, &#123;NAME =&gt; &#x27;f3&#x27;&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 同上,简写:</span></span><br><span class="line">create &#x27;t1&#x27;, &#x27;f1&#x27;, &#x27;f2&#x27;, &#x27;f3&#x27;</span><br><span class="line">create &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 1, TTL =&gt; 2592000, BLOCKCACHE =&gt; true&#125;</span><br><span class="line">create &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;, CONFIGURATION =&gt; &#123;&#x27;hbase.hstore.blockingStoreFiles&#x27; =&gt; &#x27;10&#x27;&#125;&#125;</span><br><span class="line">create &#x27;t&#x27;, &#123;NAME =&gt; &#x27;t&#x27;, CONFIGURATION =&gt; &#123;CACHE_DATA_IN_L1 =&gt; &#x27;true&#x27;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>表配置选项可以放在末尾.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create &#x27;ns1:t1&#x27;, &#x27;f1&#x27;, SPLITS =&gt; [&#x27;10&#x27;, &#x27;20&#x27;, &#x27;30&#x27;, &#x27;40&#x27;]</span><br><span class="line">create &#x27;t1&#x27;, &#x27;f1&#x27;, SPLITS =&gt; [&#x27;10&#x27;, &#x27;20&#x27;, &#x27;30&#x27;, &#x27;40&#x27;]</span><br><span class="line">create &#x27;t1&#x27;, &#x27;f1&#x27;, SPLITS_FILE =&gt; &#x27;splits.txt&#x27;, OWNER =&gt; &#x27;johndoe&#x27;</span><br><span class="line">create &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;, VERSIONS =&gt; 5&#125;, METADATA =&gt; &#123; &#x27;mykey&#x27; =&gt; &#x27;myvalue&#x27; &#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> (可选)使用SPLITALGO(<span class="string">&quot;HexStringSplit&quot;</span>/<span class="string">&quot;UniformSplit&quot;</span>/类名)</span></span><br><span class="line">create &#x27;t1&#x27;, &#x27;f1&#x27;, &#123;NUMREGIONS =&gt; 15, SPLITALGO =&gt; &#x27;HexStringSplit&#x27;&#125;</span><br><span class="line">create &#x27;t1&#x27;, &#x27;f1&#x27;, &#123;NUMREGIONS =&gt; 15, SPLITALGO =&gt; &#x27;HexStringSplit&#x27;, REGION_REPLICATION =&gt; 2, CONFIGURATION =&gt; &#123;&#x27;hbase.hregion.scan.loadColumnFamiliesOnDemand&#x27; =&gt; &#x27;true&#x27;&#125;&#125;</span><br><span class="line">create &#x27;t1&#x27;, &#123;NAME =&gt; &#x27;f1&#x27;, DFS_REPLICATION =&gt; 1&#125;</span><br></pre></td></tr></table></figure>

<p>还可以保留对所创建表的引用:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t1 = create &#x27;t1&#x27;, &#x27;f1&#x27;</span><br></pre></td></tr></table></figure>

<p>这为您提供了名为&#39;t1&#39;的表的引用,然后您可以在该表上调用方法.</p>
<h4 id="describe"><a href="#describe" class="headerlink" title="describe"></a>describe</h4><p>描述命名表.或者可以使用缩写的&#39;desc&#39;来表示相同的内容.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">describe &#x27;t1&#x27;</span><br><span class="line">describe &#x27;ns1:t1&#x27;</span><br><span class="line">desc &#x27;t1&#x27;</span><br><span class="line">desc &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="disable"><a href="#disable" class="headerlink" title="disable"></a>disable</h4><p>开始禁用命名表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">disable &#x27;t1&#x27;</span><br><span class="line">disable &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="disable-all"><a href="#disable-all" class="headerlink" title="disable_all"></a>disable_all</h4><p>禁用与给定正则表达式匹配的所有表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">disable_all &#x27;t.*&#x27;</span><br><span class="line">disable_all &#x27;ns:t.*&#x27;</span><br><span class="line">disable_all &#x27;ns:.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h4><p>删除命名表.必须首先禁用表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drop &#x27;t1&#x27;</span><br><span class="line">drop &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="drop-all"><a href="#drop-all" class="headerlink" title="drop_all"></a>drop_all</h4><p>删除与给定正则表达式匹配的所有表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">drop_all &#x27;t.*&#x27;</span><br><span class="line">drop_all &#x27;ns:t.*&#x27;</span><br><span class="line">drop_all &#x27;ns:.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="enable"><a href="#enable" class="headerlink" title="enable"></a>enable</h4><p>启动命名表的启用.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enable &#x27;t1&#x27;</span><br><span class="line">enable &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="enable-all"><a href="#enable-all" class="headerlink" title="enable_all"></a>enable_all</h4><p>启用与给定正则表达式匹配的所有表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enable_all &#x27;t.*&#x27;</span><br><span class="line">enable_all &#x27;ns:t.*&#x27;</span><br><span class="line">enable_all &#x27;ns:.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h4><p>命名表是否存在.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exists &#x27;t1&#x27;</span><br><span class="line">exists &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="get-table"><a href="#get-table" class="headerlink" title="get_table"></a>get_table</h4><p>获取给定的表名并将其作为实际对象返回到由用户操纵.<br>有关详细信息,请参阅表帮助.<br>关于如何使用table,如.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t1 = get_table &#x27;t1&#x27;</span><br><span class="line">t1 = get_table &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<p>返回名为&#39;t1&#39;的表作为表对象.你可以这样做,然后将打印该表的帮助.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t1.help</span><br></pre></td></tr></table></figure>

<h4 id="is-disabled"><a href="#is-disabled" class="headerlink" title="is_disabled"></a>is_disabled</h4><p>是否禁用命名表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is_disabled &#x27;t1&#x27;</span><br><span class="line">is_disabled &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="is-enabled"><a href="#is-enabled" class="headerlink" title="is_enabled"></a>is_enabled</h4><p>是否启用命名表.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is_enabled &#x27;t1&#x27;</span><br><span class="line">is_enabled &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>列出hbase中的所有表.<br>可选正则表达式参数可以用于过滤输出.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list</span><br><span class="line">list &#x27;abc.*&#x27;</span><br><span class="line">list &#x27;ns:abc.*&#x27;</span><br><span class="line">list &#x27;ns:.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="locate-region"><a href="#locate-region" class="headerlink" title="locate_region"></a>locate_region</h4><p>找到给定表名和行键的区域.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locate_region &#x27;tableName&#x27;, &#x27;key0&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="show-filters"><a href="#show-filters" class="headerlink" title="show_filters"></a>show_filters</h4><p>显示hbase中的所有筛选器.例如.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">show_filters</span><br><span class="line"></span><br><span class="line">  ColumnPrefixFilter</span><br><span class="line">  TimestampsFilter</span><br><span class="line">  PageFilter</span><br><span class="line">  .....</span><br><span class="line">  KeyOnlyFilter</span><br></pre></td></tr></table></figure>

<h3 id="namespace"><a href="#namespace" class="headerlink" title="namespace"></a>namespace</h3><h4 id="alter-namespace"><a href="#alter-namespace" class="headerlink" title="alter_namespace"></a>alter_namespace</h4><p>更改命名空间属性.<br>要添加/修改属性,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter_namespace &#x27;ns1&#x27;, &#123;METHOD =&gt; &#x27;set&#x27;, &#x27;PROPERTY_NAME&#x27; =&gt; &#x27;PROPERTY_VALUE&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>要删除属性,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter_namespace &#x27;ns1&#x27;, &#123;METHOD =&gt; &#x27;unset&#x27;, NAME=&gt;&#x27;PROPERTY_NAME&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="create-namespace"><a href="#create-namespace" class="headerlink" title="create_namespace"></a>create_namespace</h4><p>创建命名空间.<br>传递命名空间名称,以及可选的命名空间配置字典.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create_namespace &#x27;ns1&#x27;</span><br><span class="line">create_namespace &#x27;ns1&#x27;, &#123;&#x27;PROPERTY_NAME&#x27;=&gt;&#x27;PROPERTY_VALUE&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="describe-namespace"><a href="#describe-namespace" class="headerlink" title="describe_namespace"></a>describe_namespace</h4><p>描述命名的命名空间.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe_namespace &#x27;ns1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="drop-namespace"><a href="#drop-namespace" class="headerlink" title="drop_namespace"></a>drop_namespace</h4><p>删除命名的命名空间.<br>命名空间必须为空.</p>
<h4 id="list-namespace"><a href="#list-namespace" class="headerlink" title="list_namespace"></a>list_namespace</h4><p>列出hbase中的所有名称空间.<br>可选正则表达式参数可以用于过滤输出.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list_namespace</span><br><span class="line">list_namespace &#x27;abc.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="list-namespace-tables"><a href="#list-namespace-tables" class="headerlink" title="list_namespace_tables"></a>list_namespace_tables</h4><p>列出作为命名空间成员的所有表.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_namespace_tables &#x27;ns1&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="dml"><a href="#dml" class="headerlink" title="dml"></a>dml</h3><h4 id="append"><a href="#append" class="headerlink" title="append"></a>append</h4><p>在指定的table/row/column坐标处追加单元格&#39;value&#39;.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">append &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;</span><br><span class="line">append &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t.append &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;</span><br><span class="line">t.append &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="count"><a href="#count" class="headerlink" title="count"></a>count</h4><p>计算表中的行数.<br>返回值是行数.<br>此操作可能需要很长时间(运行&#39;$HADOOP_HOME/bin/hadoop jar hbase.jar rowcount&#39;以运行计数mapreduce作业).<br>默认情况下每1000行显示当前计数.<br>可以选择指定计数间隔.</p>
<p>默认情况下,计数扫描时启用缓存.<br>默认缓存大小为10行.<br>如果行的大小较小,您可能需要增加.<br>参数示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">count &#x27;ns1:t1&#x27;</span><br><span class="line">count &#x27;t1&#x27;</span><br><span class="line">count &#x27;t1&#x27;, INTERVAL =&gt; 100000</span><br><span class="line">count &#x27;t1&#x27;, CACHE =&gt; 1000</span><br><span class="line">count &#x27;t1&#x27;, INTERVAL =&gt; 10, CACHE =&gt; 1000</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t.count</span><br><span class="line">t.count INTERVAL =&gt; 100000</span><br><span class="line">t.count CACHE =&gt; 1000</span><br><span class="line">t.count INTERVAL =&gt; 10, CACHE =&gt; 1000</span><br></pre></td></tr></table></figure>

<h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><p>在指定的table/row/column中放置一个删除单元格值,并且可以选择时间戳坐标.<br>删除必须与删除的单元格匹配精确坐标.<br>扫描时,删除单元格会抑制较旧的版本.<br>删除列&#39;c1&#39;下第&#39;r1&#39;行&#39;t1&#39;中的单元格,标记为时间&#39;ts1&#39;,请执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete &#x27;ns1:t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, ts1</span><br><span class="line">delete &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, ts1</span><br><span class="line">delete &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, ts1, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t.delete &#x27;r1&#x27;, &#x27;c1&#x27;,  ts1</span><br><span class="line">t.delete &#x27;r1&#x27;, &#x27;c1&#x27;,  ts1, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="deleteall"><a href="#deleteall" class="headerlink" title="deleteall"></a>deleteall</h4><p>删除给定行中的所有单元格.<br>传递表名/行和(可选)列和时间戳.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deleteall &#x27;ns1:t1&#x27;, &#x27;r1&#x27;</span><br><span class="line">deleteall &#x27;t1&#x27;, &#x27;r1&#x27;</span><br><span class="line">deleteall &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">deleteall &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, ts1</span><br><span class="line">deleteall &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, ts1, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t.deleteall &#x27;r1&#x27;</span><br><span class="line">t.deleteall &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">t.deleteall &#x27;r1&#x27;, &#x27;c1&#x27;, ts1</span><br><span class="line">t.deleteall &#x27;r1&#x27;, &#x27;c1&#x27;, ts1, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><p>获取行或单元格内容.<br>传递表名/行和(可选)列/时间戳/时间范围和版本的字典.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">get &#x27;ns1:t1&#x27;, &#x27;r1&#x27;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;TIMERANGE =&gt; [ts1, ts2]&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;, &#x27;c3&#x27;]&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMESTAMP =&gt; ts1&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMERANGE =&gt; [ts1, ts2], VERSIONS =&gt; 4&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMESTAMP =&gt; ts1, VERSIONS =&gt; 4&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;FILTER =&gt; &quot;ValueFilter(=, &#x27;binary:abc&#x27;)&quot;&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;c2&#x27;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, [&#x27;c1&#x27;, &#x27;c2&#x27;]</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, ATTRIBUTES =&gt; &#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, AUTHORIZATIONS =&gt; [&#x27;PRIVATE&#x27;,&#x27;SECRET&#x27;]&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;&#125;</span><br><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;, REGION_REPLICA_ID =&gt; 1&#125;</span><br></pre></td></tr></table></figure>

<p>除了默认的&#39;toStringBinary&#39;格式外,&#39;get&#39;还支持自定义格式列.<br>可以通过将FORMATER添加到get中的列名来定义FORMATER.<br>规格可以规定格式:</p>
<ol>
<li>作为<code>org.apache.hadoop.hbase.util.Bytes</code>方法名(例如,toInt/toString)</li>
<li>或作为后跟方法名称的自定义类:例如&#39;c(MyFormatterClass).format&#39;.</li>
</ol>
<p>示例格式cf:qualifier1和cf:qualiifier2均为整数:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get &#x27;t1&#x27;, &#x27;r1&#x27; &#123;COLUMN =&gt; [&#x27;cf:qualifier1:toInt&#x27;, &#x27;cf:qualifier2:c(org.apache.hadoop.hbase.util.Bytes).toInt&#x27;] &#125;</span><br></pre></td></tr></table></figure>

<p>请注意,只能按列指定FORMATER(cf:qualifier).<br>不能指定列族中所有列的FORMATER.</p>
<p>同样的命令也可以对表的引用(通过get_table或create_table).<br>假设您对表&#39;t1&#39;有一个引用t,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">t.get &#x27;r1&#x27;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;TIMERANGE =&gt; [ts1, ts2]&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;COLUMN =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;, &#x27;c3&#x27;]&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMESTAMP =&gt; ts1&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMERANGE =&gt; [ts1, ts2], VERSIONS =&gt; 4&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;COLUMN =&gt; &#x27;c1&#x27;, TIMESTAMP =&gt; ts1, VERSIONS =&gt; 4&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;FILTER =&gt; &quot;ValueFilter(=, &#x27;binary:abc&#x27;)&quot;&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">t.get &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;c2&#x27;</span><br><span class="line">t.get &#x27;r1&#x27;, [&#x27;c1&#x27;, &#x27;c2&#x27;]</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;&#125;</span><br><span class="line">t.get &#x27;r1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;, REGION_REPLICA_ID =&gt; 1&#125;</span><br></pre></td></tr></table></figure>

<h4 id="get-counter"><a href="#get-counter" class="headerlink" title="get_counter"></a>get_counter</h4><p>返回指定table/row/column坐标处的计数器单元格值.<br>应使用HBase上的原子增量函数(increment)管理计数器单元.<br>并且数据应该是二进制编码的(作为long值).<br>例子:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get_counter &#x27;ns1:t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">get_counter &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.get_counter &#x27;r1&#x27;, &#x27;c1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="get-splits"><a href="#get-splits" class="headerlink" title="get_splits"></a>get_splits</h4><p>获取命名表的拆分:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get_splits &#x27;t1&#x27;</span><br><span class="line">get_splits &#x27;ns1:t1&#x27;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.get_splits</span><br></pre></td></tr></table></figure>

<h4 id="incr"><a href="#incr" class="headerlink" title="incr"></a>incr</h4><p>在指定的table/row/column坐标处增加单元格&#39;value&#39;.<br>在列&#39;r1&#39;行的表&#39;ns1:t1&#39;或&#39;t1&#39;中增加单元格值<br>&#39;c1&#39;乘以1(可以省略)或10:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">incr &#x27;ns1:t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, 1</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, 10</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, 10, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">incr &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, 10, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t.incr &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line">t.incr &#x27;r1&#x27;, &#x27;c1&#x27;, 1</span><br><span class="line">t.incr &#x27;r1&#x27;, &#x27;c1&#x27;, 10, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">t.incr &#x27;r1&#x27;, &#x27;c1&#x27;, 10, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="put"><a href="#put" class="headerlink" title="put"></a>put</h4><p>将单元格&#39;value&#39;放置在指定的table/row/column中,并且可以选择时间戳坐标.<br>将单元格值放入表&#39;ns1:t1&#39;或&#39;t1&#39;在标有时间&#39;ts1&#39;的列&#39;c1&#39;下的行&#39;r1&#39;处,执行以下操作:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">put &#x27;ns1:t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;</span><br><span class="line">put &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;</span><br><span class="line">put &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ts1</span><br><span class="line">put &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">put &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ts1, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">put &#x27;t1&#x27;, &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ts1, &#123;VISIBILITY=&gt;&#x27;PRIVATE|SECRET&#x27;&#125;</span><br></pre></td></tr></table></figure>

<p>同样的命令也可以在表引用上运行.<br>假设你有一个t到表&#39;t1&#39;,相应的命令将是:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t.put &#x27;r1&#x27;, &#x27;c1&#x27;, &#x27;value&#x27;, ts1, &#123;ATTRIBUTES=&gt;&#123;&#x27;mykey&#x27;=&gt;&#x27;myvalue&#x27;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="scan"><a href="#scan" class="headerlink" title="scan"></a>scan</h4><p>扫描表格.传递表名和可选的扫描器字典规格.<br>扫描仪规格可能包括以下一项或多项:<br>TIMERANGE, FILTER, LIMIT, STARTROW, STOPROW, ROWPREFIXFILTER, TIMESTAMP,<br>MAXLENGTH or COLUMNS, CACHE or RAW, VERSIONS, ALL_METRICS or METRICS</p>
<p>如果未指定列,将扫描所有列.<br>要扫描列族的所有成员,请将限定符留空,如中所示:&#39;col_family&#39;.</p>
<p>可以通过两种方式指定过滤器:</p>
<ol>
<li>使用filterString-有关详细信息,请参阅 HBASE-4176 JIRA附带的过滤语言文档.</li>
<li>使用过滤器的整个包名称.</li>
</ol>
<p>如果您希望查看有关扫描执行的指标,ALL_METRICS布尔值应设置为true.<br>或者,如果您愿意希望只看到度量的子集,metrics数组可以是定义为仅包含您关心的度量的名称.<br>一些示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scan &#x27;hbase:meta&#x27;</span><br><span class="line">scan &#x27;hbase:meta&#x27;, &#123;COLUMNS =&gt; &#x27;info:regioninfo&#x27;&#125;</span><br><span class="line">scan &#x27;ns1:t1&#x27;, &#123;COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;], LIMIT =&gt; 10, STARTROW =&gt; &#x27;xyz&#x27;&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;], LIMIT =&gt; 10, STARTROW =&gt; &#x27;xyz&#x27;&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;COLUMNS =&gt; &#x27;c1&#x27;, TIMERANGE =&gt; [1303668804, 1303668904]&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;REVERSED =&gt; true&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;ALL_METRICS =&gt; true&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;METRICS =&gt; [&#x27;RPC_RETRIES&#x27;, &#x27;ROWS_FILTERED&#x27;]&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;ROWPREFIXFILTER =&gt; &#x27;row2&#x27;, FILTER =&gt; &quot;(QualifierFilter (&gt;=, &#x27;binary:xyz&#x27;)) AND (TimestampsFilter ( 123, 456))&quot;&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;FILTER =&gt; org.apache.hadoop.hbase.filter.ColumnPaginationFilter.new(1, 0)&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123;CONSISTENCY =&gt; &#x27;TIMELINE&#x27;&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#用于设置操作属性</span></span></span><br><span class="line">scan &#x27;t1&#x27;, &#123; COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;], ATTRIBUTES =&gt; &#123;&#x27;mykey&#x27; =&gt; &#x27;myvalue&#x27;&#125;&#125;</span><br><span class="line">scan &#x27;t1&#x27;, &#123; COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;], AUTHORIZATIONS =&gt; [&#x27;PRIVATE&#x27;,&#x27;SECRET&#x27;]&#125;</span><br></pre></td></tr></table></figure>

<p>对于专家来说,还有一个额外的选项--CACHE_BLOCKS--通过打开(true)或关闭(false)扫描仪的块缓存.<br>默认为启用.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scan &#x27;t1&#x27;, &#123;COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;], CACHE_BLOCKS =&gt; false&#125;</span><br></pre></td></tr></table></figure>

<p>对于专家来说,还有一个高级选项RAW,它指示扫描仪返回所有单元格(包括删除标记和未选中的已删除cells).<br>此选项不能与请求特定COLUMNS组合使用.<br>默认情况下禁用.<br>例子:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scan &#x27;t1&#x27;, &#123;RAW =&gt; true, VERSIONS =&gt; 10&#125;</span><br></pre></td></tr></table></figure>

<p>除了默认的&#39;toStringBinary&#39;格式外,&#39;scan&#39;支持自定义格式按列.<br>用户可以通过将格式添加到扫描规范.<br>可以规定格式:</p>
<ol>
<li>作为<code>org.apache.hadoop.hbase.util.Bytes</code>方法名(例如,toInt/toString)</li>
<li>或作为后跟方法名称的自定义类:例如&#39;c(MyFormatterClass).format&#39;.</li>
</ol>
<p>示例格式cf:qualifier1和cf:qualiifier2均为整数:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scan &#x27;t1&#x27;, &#123;COLUMNS =&gt; [&#x27;cf:qualifier1:toInt&#x27;, &#x27;cf:qualifier2:c(org.apache.hadoop.hbase.util.Bytes).toInt&#x27;] &#125;</span><br></pre></td></tr></table></figure>

<p>请注意,只能按列指定FORMATER(cf:qualifier).<br>你不能为列族的所有列指定FORMATER.</p>
<p>扫描也可以直接从表中使用.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t = get_table &#x27;t&#x27;</span><br><span class="line">t.scan</span><br></pre></td></tr></table></figure>

<p>注意,在上述情况下,您仍然可以提供所有过滤/列/选项.</p>
<h4 id="truncate"><a href="#truncate" class="headerlink" title="truncate"></a>truncate</h4><p>禁用/删除和重新创建指定的表.</p>
<h4 id="truncate-preserve"><a href="#truncate-preserve" class="headerlink" title="truncate_preserve"></a>truncate_preserve</h4><p>禁用/删除和重新创建指定的表,同时仍保持以前的region边界.</p>
<h3 id="tools"><a href="#tools" class="headerlink" title="tools"></a>tools</h3><h4 id="assign"><a href="#assign" class="headerlink" title="assign"></a>assign</h4><p>指定区域.<br>小心使用.<br>如果已经分配了区域,此命令将执行强制重新分配.<br>仅供专家使用.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assign &#x27;REGIONNAME&#x27;</span><br><span class="line">assign &#x27;ENCODED_REGIONNAME&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="unassign"><a href="#unassign" class="headerlink" title="unassign"></a>unassign</h4><p>取消指定区域.<br>取消分配将关闭当前位置的区域,然后重新打开它.<br>传递&#39;true&#39;以强制取消分配(&#39;force&#39;将在重新分配之前清除master中的所有内存状态.如果结果为double assignment,使用hbck-fix来解决.供专家使用).</p>
<p>小心使用.<br>仅供专家使用.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unassign &#x27;REGIONNAME&#x27;</span><br><span class="line">unassign &#x27;REGIONNAME&#x27;, true</span><br><span class="line">unassign &#x27;ENCODED_REGIONNAME&#x27;</span><br><span class="line">unassign &#x27;ENCODED_REGIONNAME&#x27;, true</span><br></pre></td></tr></table></figure>

<h4 id="balance-switch"><a href="#balance-switch" class="headerlink" title="balance_switch"></a>balance_switch</h4><p>启用/禁用平衡器.<br>返回之前的平衡器状态.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">balance_switch true</span><br><span class="line">balance_switch false</span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置master是否执行平衡各个regionserver的region数量,当我们需要维护或者重启一个regionserver时,会关闭balancer,这样就使得region在regionserver上的分布不均,这个时候需要手工的开启balance.</p>
</blockquote>
<h4 id="balancer"><a href="#balancer" class="headerlink" title="balancer"></a>balancer</h4><p>触发群集平衡器.<br>如果平衡器运行并且能够告诉区域服务器取消分配所有要平衡的区域(重新分配本身是异步的),则返回true.<br>否则为false(如果区域处于过渡状态transition,则不会运行).</p>
<h4 id="balancer-enabled"><a href="#balancer-enabled" class="headerlink" title="balancer_enabled"></a>balancer_enabled</h4><p>查询平衡器的状态.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">balancer_enabled</span><br></pre></td></tr></table></figure>

<h4 id="flush"><a href="#flush" class="headerlink" title="flush"></a>flush</h4><p>刷新所传递表中的所有区域或将区域行传递给单个区域flush.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flush &#x27;TABLENAME&#x27;</span><br><span class="line">flush &#x27;REGIONNAME&#x27;</span><br><span class="line">flush &#x27;ENCODED_REGIONNAME&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>所有memstore刷新到hdfs,通常如果发现regionserver的内存使用过大,造成该机的 regionserver很多线程block,可以执行一下flush操作.<br>这个操作会造成hbase的storefile数量剧增,应尽量避免这个操作.<br>还有一种情况,在hbase进行迁移的时候,如果选择拷贝文件方式,可以先停写入,然后flush所有表,拷贝文件.</p>
</blockquote>
<h4 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h4><p>压缩传递表中的所有区域或传递区域行以压缩单个区域.<br>也可以压缩一个region单个一个列族.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩表中的所有区域</span></span></span><br><span class="line">compact &#x27;ns1:t1&#x27;</span><br><span class="line">compact &#x27;t1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩整个区域</span></span></span><br><span class="line">compact &#x27;r1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#仅压缩区域内的列族</span></span></span><br><span class="line">compact &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩表中的列族</span></span></span><br><span class="line">compact &#x27;t1&#x27;, &#x27;c1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="compact-rs"><a href="#compact-rs" class="headerlink" title="compact_rs"></a>compact_rs</h4><p>压缩传递的区域服务器上的所有区域.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩区域服务器上的所有区域</span></span></span><br><span class="line">compact_rs &#x27;host187.example.com,60020&#x27;</span><br><span class="line">compact_rs &#x27;host187.example.com,60020,1289493121758&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#主要压缩(Major compact)区域服务器上的所有区域</span></span></span><br><span class="line">compact_rs &#x27;host187.example.com,60020,1289493121758&#x27;, true</span><br></pre></td></tr></table></figure>

<h4 id="major-compact"><a href="#major-compact" class="headerlink" title="major_compact"></a>major_compact</h4><p>对传递的表或传递区域行运行主要压缩<br>以主要压缩单个区域.<br>压缩单个区域内的列族指定区域名称,后跟列族名称.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩表中的所有区域</span></span></span><br><span class="line">major_compact &#x27;t1&#x27;</span><br><span class="line">major_compact &#x27;ns1:t1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#压缩整个区域</span></span></span><br><span class="line">major_compact &#x27;r1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#在区域内压缩单个列族</span></span></span><br><span class="line">major_compact &#x27;r1&#x27;, &#x27;c1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#在表中压缩单列族</span></span></span><br><span class="line">major_compact &#x27;t1&#x27;, &#x27;c1&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>进行操作前先将balancer关闭,操作完成后再打开balancer.</p>
<p>选择一个系统比较空闲的时间手动major_compact.<br>如果hbase更新不是太频繁,可以一个星期对所有表做一次major_compact,这个可以在做完一次major_compact后,观看所有的storefile数量.<br>如果storefile数量增加到major_compact后的storefile的近二倍时,可以对所有表做一次major_compact,时间比较长,操作尽量避免高锋期.</p>
</blockquote>
<h4 id="merge-region"><a href="#merge-region" class="headerlink" title="merge_region"></a>merge_region</h4><p>合并两个区域.<br>传递&#39;true&#39;作为可选的第三个参数将强制合并(&#39;force&#39;合并而不管其他情况将失败,除非通过相邻区域.&#39;force&#39;仅供专家使用).<br>注意:您必须传递编码的region名称,而不是完整的region名称</p>
<p>此命令与其他区域操作稍有不同.<br>编码的region name是区域名称的哈希后缀:例如,如果区域名称是<br>TestTable,0094429456,1289497600452.527db22f95c8a9e0116f0cc13c680396.<br>则编码区域名称部分是527db22f95c8a9e0116f0cc13c680396.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">merge_region &#x27;ENCODED_REGIONNAME&#x27;, &#x27;ENCODED_REGIONNAME&#x27;</span><br><span class="line">merge_region &#x27;ENCODED_REGIONNAME&#x27;, &#x27;ENCODED_REGIONNAME&#x27;, true</span><br><span class="line"></span><br><span class="line">merge_region &#x27;ab63cf5e0db9ffdf2626a5ac005cb1dd&#x27;,&#x27;441d6f6dcf16f6b85f7d44cb4c909214&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>进行操作前先将balancer关闭,操作完成后再打开balancer.<br>经过一段时间的运行之后有可能会产生一些很小的region,需要定期检查这些region并将它们和相邻的region合并以减少系统的总region数,减少管理开销.</p>
</blockquote>
<blockquote>
<p>合并方法</p>
</blockquote>
<ol>
<li>找到需要合并的region的encoded name</li>
<li>进入hbase shell</li>
<li>执行merge_region &#39;region1&#39;,&#39;region2&#39;</li>
</ol>
<h4 id="split"><a href="#split" class="headerlink" title="split"></a>split</h4><p>拆分整个表或传递区域以拆分单个区域.<br>使用第二个参数,可以为区域指定显式拆分键.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">split &#x27;tableName&#x27;</span><br><span class="line">split &#x27;namespace:tableName&#x27;</span><br><span class="line">split &#x27;regionName&#x27; # format: &#x27;tableName,startKey,id&#x27;</span><br><span class="line">split &#x27;tableName&#x27;, &#x27;splitKey&#x27;</span><br><span class="line">split &#x27;regionName&#x27;, &#x27;splitKey&#x27;</span><br><span class="line"></span><br><span class="line">split &#x27;bde4229f455f62124f279c3e0d246a62&#x27;,&#x27;25&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="move"><a href="#move" class="headerlink" title="move"></a>move</h4><p>移动区域,分配region.<br>可选地指定目标区域服务器,否则我们选择一个随机.<br>注意:您传递的是编码的region名称,而不是region名称,因此这个命令与其他命令有点不同.<br>编码区域名称是区域名称的哈希后缀:例如,如果区域名称是<br>TestTable,0094429456,1289497600452.527db22f95c8a9e0116f0cc13c680396.<br>则编码区域名称部分是527db22f95c8a9e0116f0cc13c680396.</p>
<p>服务器名称是其主机/端口和启动代码.<br>例如:host187.example.com,600201289493121758</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">move &#x27;ENCODED_REGIONNAME&#x27;</span><br><span class="line">move &#x27;ENCODED_REGIONNAME&#x27;, &#x27;SERVER_NAME&#x27;</span><br><span class="line"></span><br><span class="line">move &#x27;bde4229f455f62124f279c3e0d246a62&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果发现1台regionServer资源占用特别高,可以检查这台regionserver上的region是否存在过多比较大的region,通过hbase shell将部分比较大的region分配给其他不是很忙的regions server.</p>
</blockquote>
<h4 id="close-region"><a href="#close-region" class="headerlink" title="close_region"></a>close_region</h4><p>关闭单个区域.<br>要求master关闭集群上的区域,或者如果提供了&#39;SERVER_NAME&#39;,请要求指定的托管区域服务器直接关闭区域.<br>关闭区域时,master需要&#39;REGIONNAME&#39;成为完全限定的区域名称.<br>当要求托管区域服务器直接关闭区域,只传递区域的编码名称.<br>一个区域名称如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TestTable,0094429456,1289497600452.527db22f95c8a9e0116f0cc13c680396.</span><br><span class="line">Namespace:TestTable,0094429456,1289497600452.527db22f95c8a9e0116f0cc13c680396.</span><br></pre></td></tr></table></figure>

<p>尾随句点是区域服务器名称的一部分.<br>区域的编码名称是区域名称末尾的哈希值.例如527db22f95c8a9e0116f0cc13c680396(不带句点).<br>&#39;SERVER_NAME&#39;是其主机/端口和启动代码.<br>示例:host187.example.com,600201289493121758(在master ui中查找服务器名或者当您在shell中执行详细状态时).<br>此命令将结束运行关闭区域托管区域服务器.<br>结束时没有master的参与(它不会知道结局).<br>一旦关闭,区域将保持关闭.<br>使用assign重新打开/重新分配.<br>使用取消分配或移动来分配集群上的其他区域.<br>小心使用.<br>仅供专家使用.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">close_region &#x27;REGIONNAME&#x27;</span><br><span class="line">close_region &#x27;REGIONNAME&#x27;, &#x27;SERVER_NAME&#x27;</span><br><span class="line">close_region &#x27;ENCODED_REGIONNAME&#x27;</span><br><span class="line">close_region &#x27;ENCODED_REGIONNAME&#x27;, &#x27;SERVER_NAME&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="normalize"><a href="#normalize" class="headerlink" title="normalize"></a>normalize</h4><p>已设置NORMALIZATION_ENABLED标志的所有表的触发区域规范化器.<br>返回true,如果normalizer运行成功,否则为false.<br>请注意,此命令无效,如果禁用了区域规格化器(请确保使用&#39;normalizer_switch&#39;命令将其打开).<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">normalize</span><br></pre></td></tr></table></figure>

<h4 id="normalizer-enabled"><a href="#normalizer-enabled" class="headerlink" title="normalizer_enabled"></a>normalizer_enabled</h4><p>查询区域规格化器的状态.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">normalizer_enabled</span><br></pre></td></tr></table></figure>

<h4 id="normalizer-switch"><a href="#normalizer-switch" class="headerlink" title="normalizer_switch"></a>normalizer_switch</h4><p>启用/禁用区域规格化器.<br>返回上一个规范化器状态.</p>
<p>当normalizer被启用时,它处理&#39;NORMALIZATION_ENABLED&#39; =&gt; true的所有表.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">normalizer_switch true</span><br><span class="line">normalizer_switch false</span><br></pre></td></tr></table></figure>

<h4 id="trace"><a href="#trace" class="headerlink" title="trace"></a>trace</h4><p>使用HTrace启动或停止跟踪.<br>如果跟踪正在运行,则始终返回true,否则返回false.<br>如果第一个参数为&#39;start&#39;,则启动新的span.<br>如果第一个参数为&#39;stop&#39;,则停止当前运行范围.<br>(成功时&#39;stop&#39;返回false.)</p>
<p>如果第一个参数是&#39;status&#39;,则只返回跟踪是否正在运行.<br>在&#39;start&#39;-ing上,可以选择将span的名称作为第二个参数传递.</p>
<p>span的默认名称为&#39;HBaseShell&#39;.<br>重复&#39;start&#39;不会启动嵌套span.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trace &#x27;start&#x27;</span><br><span class="line">trace &#x27;status&#x27;</span><br><span class="line">trace &#x27;stop&#x27;</span><br><span class="line">trace &#x27;start&#x27;, &#x27;MySpanName&#x27;</span><br><span class="line">trace &#x27;stop&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="wal-roll"><a href="#wal-roll" class="headerlink" title="wal_roll"></a>wal_roll</h4><p>滚动日志记录器.<br>也就是说,开始将日志消息写入新文件.</p>
<p>区域服务器的名称应作为参数提供.<br>&#39;server_name&#39;是区域服务器的主机/端口和启动代码.<br>示例:host187.example.com,600201289493121758(在master ui或在shell中执行详细状态时中查找服务器名)</p>
<h4 id="catalogjanator-enabled"><a href="#catalogjanator-enabled" class="headerlink" title="catalogjanator_enabled"></a>catalogjanator_enabled</h4><p>查询CatalogJanator状态(enabled/disabled?)<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catalogjanitor_enabled</span><br></pre></td></tr></table></figure>

<h4 id="catalogjanator-run"><a href="#catalogjanator-run" class="headerlink" title="catalogjanator_run"></a>catalogjanator_run</h4><p>从命令行运行(垃圾收集)扫描的Catalog janator命令.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">catalogjanitor_run</span><br></pre></td></tr></table></figure>

<h4 id="catalogjanitor-switch"><a href="#catalogjanitor-switch" class="headerlink" title="catalogjanitor_switch"></a>catalogjanitor_switch</h4><p>启用/禁用CatalogJanator.<br>返回上一个CatalogJanator状态.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">catalogjanitor_switch true</span><br><span class="line">catalogjanitor_switch false</span><br></pre></td></tr></table></figure>

<h4 id="zk-dump"><a href="#zk-dump" class="headerlink" title="zk_dump"></a>zk_dump</h4><p>ZooKeeper看到的HBase集群转储状态.<br>警告:以上命令仅供&#39;专家&#39;使用,因为误用会损坏安装.</p>
<h3 id="replication"><a href="#replication" class="headerlink" title="replication"></a>replication</h3><h4 id="add-peer"><a href="#add-peer" class="headerlink" title="add_peer"></a>add_peer</h4><p>对等端可以是另一个HBase集群或自定义复制端点.<br>在任何一种情况下,id必须指定以标识对等方.</p>
<p>对于HBase集群对等体,必须提供集群密钥,其组成如下:<br>hbase.zookeeper.quorum:hbase.zookeeper.property.clientPort:zookeepr.znode.parent<br>这为HBase提供了连接到另一个HBase集群的完整路径.<br>一个可选参数是表列族标识哪些列族将被复制到对等集群.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add_peer &#x27;1&#x27;, &quot;server1.cie.com:2181:/hbase&quot;</span><br><span class="line">add_peer &#x27;2&#x27;, &quot;zk1,zk2,zk3:2182:/hbase-prod&quot;</span><br><span class="line">add_peer &#x27;3&#x27;, &quot;zk4,zk5,zk6:11000:/hbase-test&quot;, &quot;table1; table2:cf1; table3:cf1,cf2&quot;</span><br><span class="line">add_peer &#x27;4&#x27;, CLUSTER_KEY =&gt; &quot;server1.cie.com:2181:/hbase&quot;</span><br><span class="line">add_peer &#x27;5&#x27;, CLUSTER_KEY =&gt; &quot;server1.cie.com:2181:/hbase&quot;, TABLE_CFS =&gt; &#123; &quot;table1&quot; =&gt; [], &quot;table2&quot; =&gt; [&quot;cf1&quot;], &quot;table3&quot; =&gt; [&quot;cf1&quot;, &quot;cf2&quot;] &#125;</span><br></pre></td></tr></table></figure>

<p>对于自定义复制端点,可以提供ENDPOINT_CLASSNAME.<br>两个可选参数是DATA和CONFIG,可以指定为设置不同的peer_DATA或configuration<br>用于自定义复制终结点.<br>表列族是可选的,可以使用密钥TABLE_CFS.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">add_peer &#x27;6&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;</span><br><span class="line">add_peer &#x27;7&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;, DATA =&gt; &#123; &quot;key1&quot; =&gt; 1 &#125;</span><br><span class="line">add_peer &#x27;8&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;, CONFIG =&gt; &#123; &quot;config1&quot; =&gt; &quot;value1&quot;, &quot;config2&quot; =&gt; &quot;value2&quot; &#125;</span><br><span class="line">add_peer &#x27;9&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;, DATA =&gt; &#123; &quot;key1&quot; =&gt; 1 &#125;, CONFIG =&gt; &#123; &quot;config1&quot; =&gt; &quot;value1&quot;, &quot;config2&quot; =&gt; &quot;value2&quot; &#125;,</span><br><span class="line">add_peer &#x27;10&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;, TABLE_CFS =&gt; &#123; &quot;table1&quot; =&gt; [], &quot;table2&quot; =&gt; [&quot;cf1&quot;], &quot;table3&quot; =&gt; [&quot;cf1&quot;, &quot;cf2&quot;] &#125;</span><br><span class="line">add_peer &#x27;11&#x27;, ENDPOINT_CLASSNAME =&gt; &#x27;org.apache.hadoop.hbase.MyReplicationEndpoint&#x27;, ATA =&gt; &#123; &quot;key1&quot; =&gt; 1 &#125;, CONFIG =&gt; &#123; &quot;config1&quot; =&gt; &quot;value1&quot;, &quot;config2&quot; =&gt; &quot;value2&quot; &#125;, TABLE_CFS =&gt; &#123; &quot;table1&quot; =&gt; [], &quot;table2&quot; =&gt; [&quot;cf1&quot;], &quot;table3&quot; =&gt; [&quot;cf1&quot;, &quot;cf2&quot;] &#125;</span><br></pre></td></tr></table></figure>

<p>注意:必须指定CLUSTER_KEY或ENDPOINT_CLASSNAME,但不能同时指定两者.</p>
<h4 id="append-peer-tableCFs"><a href="#append-peer-tableCFs" class="headerlink" title="append_peer_tableCFs"></a>append_peer_tableCFs</h4><p>为指定的对等方添加一个可复制的table-cf config<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#附加一个表cf,以便可复制给对等方</span></span></span><br><span class="line">append_peer_tableCFs &#x27;2&#x27;, &quot;table4:cfA,cfB&quot;</span><br></pre></td></tr></table></figure>

<h4 id="disable-peer"><a href="#disable-peer" class="headerlink" title="disable_peer"></a>disable_peer</h4><p>停止到指定群集的复制流,但仍然跟踪要复制的新编辑.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable_peer &#x27;1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="disable-table-replication"><a href="#disable-table-replication" class="headerlink" title="disable_table_replication"></a>disable_table_replication</h4><p>禁用表的复制开关.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable_table_replication &#x27;table_name&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="enable-peer"><a href="#enable-peer" class="headerlink" title="enable_peer"></a>enable_peer</h4><p>重新启动到指定对等群集的复制,从禁用位置继续.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enable_peer &#x27;1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="enable-table-replication"><a href="#enable-table-replication" class="headerlink" title="enable_table_replication"></a>enable_table_replication</h4><p>启用表的复制开关.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enable_table_replication &#x27;table_name&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="list-peers"><a href="#list-peers" class="headerlink" title="list_peers"></a>list_peers</h4><p>列出所有复制对等群集.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_peers</span><br></pre></td></tr></table></figure>

<h4 id="list-replicated-tables"><a href="#list-replicated-tables" class="headerlink" title="list_replicated_tables"></a>list_replicated_tables</h4><p>列出从此群集复制的所有表和列族.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list_replicated_tables</span><br><span class="line">list_replicated_tables &#x27;abc.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="remove-peer"><a href="#remove-peer" class="headerlink" title="remove_peer"></a>remove_peer</h4><p>停止指定的复制流并删除所有元数据保存的信息.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">remove_peer &#x27;1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="remove-peer-tableCFs"><a href="#remove-peer-tableCFs" class="headerlink" title="remove_peer_tableCFs"></a>remove_peer_tableCFs</h4><p>从指定对等方的表cfs配置中删除表/表cf<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#从对等方的可复制表cf中删除表cf</span></span></span><br><span class="line">remove_peer_tableCFs &#x27;2&#x27;, &quot;table1&quot;</span><br><span class="line">remove_peer_tableCFs &#x27;2&#x27;, &quot;table1:cf1&quot;</span><br></pre></td></tr></table></figure>

<h4 id="set-peer-tableCFs"><a href="#set-peer-tableCFs" class="headerlink" title="set_peer_tableCFs"></a>set_peer_tableCFs</h4><p>为指定的对等方设置可复制表cf config<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#将所有表设置为可复制给对等方</span></span></span><br><span class="line">set_peer_tableCFs &#x27;1&#x27;, &quot;&quot;</span><br><span class="line">set_peer_tableCFs &#x27;1&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#将table/table cf设置为可复制的,对于没有一个明确的列族列表,所有可复制的列族(带有replication_scope==1)将被复制</span></span></span><br><span class="line">set_peer_tableCFs &#x27;2&#x27;, &quot;table1; table2:cf1,cf2; table3:cfA,cfB&quot;</span><br></pre></td></tr></table></figure>

<h4 id="show-peer-tableCFs"><a href="#show-peer-tableCFs" class="headerlink" title="show_peer_tableCFs"></a>show_peer_tableCFs</h4><p>显示指定对等方的可复制表cf config.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show_peer_tableCFs</span><br></pre></td></tr></table></figure>

<p>为了使用这些工具,<code>hbase.replication</code>必须为true.</p>
<h3 id="snapshots"><a href="#snapshots" class="headerlink" title="snapshots"></a>snapshots</h3><h4 id="clone-snapshot"><a href="#clone-snapshot" class="headerlink" title="clone_snapshot"></a>clone_snapshot</h4><p>通过克隆快照内容创建新表.<br>没有数据副本.<br>在新创建的表上写入不会影响快照数据.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clone_snapshot &#x27;snapshotName&#x27;, &#x27;tableName&#x27;</span><br><span class="line">clone_snapshot &#x27;snapshotName&#x27;, &#x27;namespace:tableName&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="delete-all-snapshot"><a href="#delete-all-snapshot" class="headerlink" title="delete_all_snapshot"></a>delete_all_snapshot</h4><p>删除与给定正则表达式匹配的所有快照.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_all_snapshot &#x27;s.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="delete-snapshot"><a href="#delete-snapshot" class="headerlink" title="delete_snapshot"></a>delete_snapshot</h4><p>删除指定的快照.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete_snapshot &#x27;snapshotName&#x27;,</span><br></pre></td></tr></table></figure>

<h4 id="list-snapshots"><a href="#list-snapshots" class="headerlink" title="list_snapshots"></a>list_snapshots</h4><p>列出所有拍摄的快照(通过打印名称和相关信息).<br>可选正则表达式参数可用于筛选输出,按快照名称.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list_snapshots</span><br><span class="line">list_snapshots &#x27;abc.*&#x27;</span><br></pre></td></tr></table></figure>

<img src="/images/hbsnap1.png" style="margin-left: 0px; padding-bottom: 10px;">

<h4 id="restore-snapshot"><a href="#restore-snapshot" class="headerlink" title="restore_snapshot"></a>restore_snapshot</h4><p>还原指定的快照.<br>恢复将替换原始表的内容,将内容恢复到快照状态.<br>必须禁用该表.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore_snapshot &#x27;snapshotName&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="snapshot"><a href="#snapshot" class="headerlink" title="snapshot"></a>snapshot</h4><p>拍摄指定表的快照.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">snapshot &#x27;sourceTable&#x27;, &#x27;snapshotName&#x27;</span><br><span class="line">snapshot &#x27;namespace:sourceTable&#x27;, &#x27;snapshotName&#x27;, &#123;SKIP_FLUSH =&gt; true&#125;</span><br></pre></td></tr></table></figure>

<h3 id="configuration"><a href="#configuration" class="headerlink" title="configuration"></a>configuration</h3><h4 id="update-all-config"><a href="#update-all-config" class="headerlink" title="update_all_config"></a>update_all_config</h4><p>在群集中的所有服务器上重新加载配置子集.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update_all_config</span><br></pre></td></tr></table></figure>

<h4 id="update-config"><a href="#update-config" class="headerlink" title="update_config"></a>update_config</h4><p>在servername所在的服务器&#39;servername&#39;上重新加载配置子集.<br>例如:host187.example.com,60020,1289493121758</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update_config &#x27;servername&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="quotas"><a href="#quotas" class="headerlink" title="quotas"></a>quotas</h3><h4 id="list-quotas"><a href="#list-quotas" class="headerlink" title="list_quotas"></a>list_quotas</h4><p>列出添加到系统的配额设置.<br>您可以根据USER/TABLE或NAMESPACE筛选结果.</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list_quotas</span><br><span class="line">list_quotas USER =&gt; &#x27;bob.*&#x27;</span><br><span class="line">list_quotas USER =&gt; &#x27;bob.*&#x27;, TABLE =&gt; &#x27;t1&#x27;</span><br><span class="line">list_quotas USER =&gt; &#x27;bob.*&#x27;, NAMESPACE =&gt; &#x27;ns.*&#x27;</span><br><span class="line">list_quotas TABLE =&gt; &#x27;myTable&#x27;</span><br><span class="line">list_quotas NAMESPACE =&gt; &#x27;ns.*&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="set-quota"><a href="#set-quota" class="headerlink" title="set_quota"></a>set_quota</h4><p>为用户/表或命名空间设置配额.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_quota TYPE &#x3D;&gt; &lt;type&gt;, &lt;args&gt;</span><br></pre></td></tr></table></figure>

<p>TYPE =&gt; THROTTLE<br>用户可以对读/写或同时对两个请求设置配额(即,读+写)<br>读/写或读+写(默认限制类型)请求限制可以使用<br>格式100req/sec/100req/min和读/写/读+写(默认节流类型)限制<br>可以用100k/sec/100M/min的形式表示,以(B/K/M/G/T/P)为有效大小单位<br>和(秒/分钟/小时/天)作为有效时间单位.</p>
<p>目前,每台机器的油门限制为100req/min<br>意味着每台机器可以执行100req/min.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">set_quota TYPE =&gt; THROTTLE, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; &#x27;10req/sec&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, THROTTLE_TYPE =&gt; READ, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; &#x27;10req/sec&#x27;</span><br><span class="line"></span><br><span class="line">set_quota TYPE =&gt; THROTTLE, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; &#x27;10M/sec&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, THROTTLE_TYPE =&gt; WRITE, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; &#x27;10M/sec&#x27;</span><br><span class="line"></span><br><span class="line">set_quota TYPE =&gt; THROTTLE, USER =&gt; &#x27;u1&#x27;, TABLE =&gt; &#x27;t2&#x27;, LIMIT =&gt; &#x27;5K/min&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, USER =&gt; &#x27;u1&#x27;, NAMESPACE =&gt; &#x27;ns2&#x27;, LIMIT =&gt; NONE</span><br><span class="line"></span><br><span class="line">set_quota TYPE =&gt; THROTTLE, NAMESPACE =&gt; &#x27;ns1&#x27;, LIMIT =&gt; &#x27;10req/sec&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, TABLE =&gt; &#x27;t1&#x27;, LIMIT =&gt; &#x27;10M/sec&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, THROTTLE_TYPE =&gt; WRITE, TABLE =&gt; &#x27;t1&#x27;, LIMIT =&gt; &#x27;10M/sec&#x27;</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; NONE</span><br><span class="line">set_quota TYPE =&gt; THROTTLE, THROTTLE_TYPE =&gt; WRITE, USER =&gt; &#x27;u1&#x27;, LIMIT =&gt; NONE</span><br><span class="line"></span><br><span class="line">set_quota USER =&gt; &#x27;u1&#x27;, GLOBAL_BYPASS =&gt; true</span><br></pre></td></tr></table></figure>

<h3 id="security"><a href="#security" class="headerlink" title="security"></a>security</h3><h4 id="grant"><a href="#grant" class="headerlink" title="grant"></a>grant</h4><p>授予用户特定的权限.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant &lt;user&gt;, &lt;permissions&gt; [, &lt;@namespace&gt; [, &lt;table&gt; [, &lt;column family&gt; [, &lt;column qualifier&gt;]]]</span><br></pre></td></tr></table></figure>

<p>权限是集合&quot;RWXCA&quot;中的零个或多个字母.<br>READ(&#39;R&#39;), WRITE(&#39;W&#39;), EXEC(&#39;X&#39;), CREATE(&#39;C&#39;), ADMIN(&#39;A&#39;)</p>
<p>R:Get/Scan/Exists calls<br>W:Put/Delete/LockRow/UnlockRow/IncrementColumnValue/CheckAndDelete/CheckAndPut/Flush/Compact<br>X:coprocessor<br>C:Create/Alter/Drop<br>A:Enable/Disable/Snapshot/Restore/Clone/Split/MajorCompact/Grant/Revoke/Shutdown</p>
<p>注意:以相同的方式授予组和用户访问权限,但组前缀为&#39;@&#39;字符.<br>以同样的方式,指定表和名称空间,但名称空间是前缀为&#39;@&#39;字符.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">grant &#x27;bobsmith&#x27;, &#x27;RWXCA&#x27;</span><br><span class="line">grant &#x27;@admins&#x27;, &#x27;RWXCA&#x27;</span><br><span class="line">grant &#x27;bobsmith&#x27;, &#x27;RWXCA&#x27;, &#x27;@ns1&#x27;</span><br><span class="line">grant &#x27;bobsmith&#x27;, &#x27;RW&#x27;, &#x27;t1&#x27;, &#x27;f1&#x27;, &#x27;col1&#x27;</span><br><span class="line">grant &#x27;bobsmith&#x27;, &#x27;RW&#x27;, &#x27;ns1:t1&#x27;, &#x27;f1&#x27;, &#x27;col1&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.security.authorization<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.security.exec.permission.checks<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.coprocessor.master.classes<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.security.access.AccessController<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.coprocessor.region.classes<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.security.token.TokenProvider,org.apache.hadoop.hbase.security.access.AccessController<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Cell-Level Access Control.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hbase.security.exec.permission.checks =&gt; true (the default value is false)</span><br><span class="line">hbase.security.access.early_out =&gt; false (the default value is true)</span><br><span class="line">hfile.format.version =&gt; 3 (the default value is 2)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant &#39;Employee&#39;, &#123; &#39;employe.name&#39; &#x3D;&gt; &#39;R&#39; &#125;, &#123; COLUMNS &#x3D;&gt; [ &#39;pd&#39; ], FILTER &#x3D;&gt; &quot;(PrefixFilter (&#39;T&#39;))&quot; &#125;</span><br></pre></td></tr></table></figure>

<h4 id="list-security-capabilities"><a href="#list-security-capabilities" class="headerlink" title="list_security_capabilities"></a>list_security_capabilities</h4><p>列出支持的安全功能.<br>例子:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_security_capabilities</span><br></pre></td></tr></table></figure>

<h4 id="revoke"><a href="#revoke" class="headerlink" title="revoke"></a>revoke</h4><p>撤消用户的访问权限.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">revoke &lt;user&gt; [, &lt;@namespace&gt; [, &lt;table&gt; [, &lt;column family&gt; [, &lt;column qualifier&gt;]]]]</span><br></pre></td></tr></table></figure>

<p>注意:组和用户的访问权限以相同的方式撤销,但组的前缀为&#39;@&#39;字符.<br>以同样的方式,指定表和名称空间,但名称空间是前缀为&#39;@&#39;字符.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">revoke &#x27;bobsmith&#x27;</span><br><span class="line">revoke &#x27;@admins&#x27;</span><br><span class="line">revoke &#x27;bobsmith&#x27;, &#x27;@ns1&#x27;</span><br><span class="line">revoke &#x27;bobsmith&#x27;, &#x27;t1&#x27;, &#x27;f1&#x27;, &#x27;col1&#x27;</span><br><span class="line">revoke &#x27;bobsmith&#x27;, &#x27;ns1:t1&#x27;, &#x27;f1&#x27;, &#x27;col1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="user-permission"><a href="#user-permission" class="headerlink" title="user_permission"></a>user_permission</h4><p>显示特定用户的所有权限.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user_permission &lt;table&gt;</span><br></pre></td></tr></table></figure>

<p>注意:命名空间必须始终以&#39;@&#39;字符开头.<br>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">user_permission</span><br><span class="line">user_permission &#x27;@ns1&#x27;</span><br><span class="line">user_permission &#x27;@.*&#x27;</span><br><span class="line">user_permission &#x27;@^[a-c].*&#x27;</span><br><span class="line">user_permission &#x27;table1&#x27;</span><br><span class="line">user_permission &#x27;namespace1:table1&#x27;</span><br><span class="line">user_permission &#x27;.*&#x27;</span><br><span class="line">user_permission &#x27;^[A-C].*&#x27;</span><br></pre></td></tr></table></figure>

<p>注意:以上命令仅适用于与AccessController协处理器一起运行的情况.</p>
<h3 id="procedures"><a href="#procedures" class="headerlink" title="procedures"></a>procedures</h3><h4 id="abort-procedure"><a href="#abort-procedure" class="headerlink" title="abort_procedure"></a>abort_procedure</h4><p>给定过程Id(和可选的布尔may_interrupt_if_running参数,默认值为true),中止hbase中的过程.<br>小心使用.<br>一些程序可能无法中止.<br>仅供专家使用.</p>
<p>如果该命令被接受并且该过程正在中止过程中,它将返回为真.<br>如果程序无法中止(例如程序不存在,或程序已完成或中止将导致损坏),此命令将返回false.</p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abort_procedure proc_id</span><br><span class="line">abort_procedure proc_id, true</span><br><span class="line">abort_procedure proc_id, false</span><br></pre></td></tr></table></figure>

<h4 id="list-procedures"><a href="#list-procedures" class="headerlink" title="list_procedures"></a>list_procedures</h4><p>列出hbase中的所有过程.<br>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_procedures</span><br></pre></td></tr></table></figure>

<h3 id="visibility-labels"><a href="#visibility-labels" class="headerlink" title="visibility labels"></a>visibility labels</h3><h4 id="add-labels"><a href="#add-labels" class="headerlink" title="add_labels"></a>add_labels</h4><p>添加一组可见性标签.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_labels [label1, label2]</span><br></pre></td></tr></table></figure>

<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_labels [&#x27;SECRET&#x27;,&#x27;PRIVATE&#x27;]</span><br></pre></td></tr></table></figure>

<h4 id="clear-auths"><a href="#clear-auths" class="headerlink" title="clear_auths"></a>clear_auths</h4><p>清除用户或组的可见性标签.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clear_auths &#39;user&#39;,[label1, label2]</span><br></pre></td></tr></table></figure>

<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clear_auths &#x27;user1&#x27;, [&#x27;SECRET&#x27;,&#x27;PRIVATE&#x27;]</span><br><span class="line">clear_auths &#x27;@group1&#x27;, [&#x27;SECRET&#x27;,&#x27;PRIVATE&#x27;]</span><br></pre></td></tr></table></figure>

<h4 id="get-auths"><a href="#get-auths" class="headerlink" title="get_auths"></a>get_auths</h4><p>获取为特定用户或组设置的可见性标签.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get_auths &#39;user&#39;</span><br></pre></td></tr></table></figure>

<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get_auths &#x27;user1&#x27;</span><br><span class="line">get_auths &#x27;@group1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="list-labels"><a href="#list-labels" class="headerlink" title="list_labels"></a>list_labels</h4><p>列出系统中定义的可见性标签.<br>可选正则表达式参数可用于筛选返回的标签.<br>语法:list_labels</p>
<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list_labels &#x27;secret.*&#x27;</span><br><span class="line">list_labels</span><br></pre></td></tr></table></figure>

<h4 id="set-auths"><a href="#set-auths" class="headerlink" title="set_auths"></a>set_auths</h4><p>为用户或组添加一组可见性标签.语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set_auths &#39;user&#39;,[label1, label2]</span><br></pre></td></tr></table></figure>

<p>例如:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set_auths &#x27;user1&#x27;, [&#x27;SECRET&#x27;,&#x27;PRIVATE&#x27;]</span><br><span class="line">set_auths &#x27;@group1&#x27;, [&#x27;SECRET&#x27;,&#x27;PRIVATE&#x27;]</span><br></pre></td></tr></table></figure>

<h4 id="set-visibility"><a href="#set-visibility" class="headerlink" title="set_visibility"></a>set_visibility</h4><p>在一个或多个现有单元格上设置可见性表达式.<br>传递表名/可见性表达式和包含扫描仪规格.<br>扫描仪规格可能包括一个或多个.<br>其中:TIMERANGE/FILTER/STARTROW/STOPROW/ROWPREFIXFILTER/TIMESTAMP/COLUMNS</p>
<p>如果未指定列,则将包括所有列.<br>要包含列族的所有成员,请将限定符留空,如中所示,&#39;col_family:&#39;.</p>
<p>可以通过两种方式指定过滤器:</p>
<ol>
<li>使用filterString-有关详细信息,请参阅HBASE-4176 JIRA附带的过滤语言文档</li>
<li>使用过滤器的整个包名称.</li>
</ol>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set_visibility &#x27;t1&#x27;, &#x27;A|B&#x27;, &#123;COLUMNS =&gt; [&#x27;c1&#x27;, &#x27;c2&#x27;]&#125;</span><br><span class="line">set_visibility &#x27;t1&#x27;, &#x27;(A&amp;B)|C&#x27;, &#123;COLUMNS =&gt; &#x27;c1&#x27;, TIMERANGE =&gt; [1303668804, 1303668904]&#125;</span><br><span class="line">set_visibility &#x27;t1&#x27;, &#x27;A&amp;B&amp;C&#x27;, &#123;ROWPREFIXFILTER =&gt; &#x27;row2&#x27;, FILTER =&gt; &quot;(QualifierFilter (&gt;=, &#x27;binary:xyz&#x27;)) AND (TimestampsFilter ( 123, 456))&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>此命令仅影响现有单元格,预计主要用于特征测试和功能验证.</p>
<p>注:以上命令仅适用于与VisibilityController协处理器一起运行的情况.</p>
<h2 id="pe"><a href="#pe" class="headerlink" title="pe"></a>pe</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Usage: java org.apache.hadoop.hbase.PerformanceEvaluation \</span><br><span class="line">  &lt;OPTIONS&gt; [-D&lt;property&#x3D;value&gt;]* &lt;command&gt; &lt;nclients&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> nomapred        Run multiple clients using threads (rather than use mapreduce)</span><br><span class="line"> rows            Rows each client runs. Default: One million</span><br><span class="line"> size            Total size in GiB. Mutually exclusive with --rows. Default: 1.0.</span><br><span class="line"> sampleRate      Execute test on a sample of total rows. Only supported by randomRead. Default: 1.0</span><br><span class="line"> traceRate       Enable HTrace spans. Initiate tracing every N rows. Default: 0</span><br><span class="line"> table           Alternate table name. Default: &#39;TestTable&#39;</span><br><span class="line"> multiGet        If &gt;0, when doing RandomRead, perform multiple gets instead of single gets. Default: 0</span><br><span class="line"> compress        Compression type to use (GZ, LZO, ...). Default: &#39;NONE&#39;</span><br><span class="line"> flushCommits    Used to determine if the test should flush the table. Default: false</span><br><span class="line"> writeToWAL      Set writeToWAL on puts. Default: True</span><br><span class="line"> autoFlush       Set autoFlush on htable. Default: False</span><br><span class="line"> oneCon          all the threads share the same connection. Default: False</span><br><span class="line"> presplit        Create presplit table. Recommended for accurate perf analysis (see guide).  Default: disabled</span><br><span class="line"> inmemory        Tries to keep the HFiles of the CF inmemory as far as possible. Not guaranteed that reads are always served from memory.  Default: false</span><br><span class="line"> usetags         Writes tags along with KVs. Use with HFile V3. Default: false</span><br><span class="line"> numoftags       Specify the no of tags that would be needed. This works only if usetags is true.</span><br><span class="line"> filterAll       Helps to filter out all the rows on the server side there by not returning any thing back to the client.  Helps to check the server side performance.  Uses FilterAllFilter internally. </span><br><span class="line"> latency         Set to report operation latencies. Default: False</span><br><span class="line"> bloomFilter      Bloom filter type, one of [NONE, ROW, ROWCOL]</span><br><span class="line"> valueSize       Pass value size to use: Default: 1024</span><br><span class="line"> valueRandom     Set if we should vary value size between 0 and &#39;valueSize&#39;; set on read for stats on size: Default: Not set.</span><br><span class="line"> valueZipf       Set if we should vary value size between 0 and &#39;valueSize&#39; in zipf form: Default: Not set.</span><br><span class="line"> period          Report every &#39;period&#39; rows: Default: opts.perClientRunRows &#x2F; 10</span><br><span class="line"> multiGet        Batch gets together into groups of N. Only supported by randomRead. Default: disabled</span><br><span class="line"> addColumns      Adds columns to scans&#x2F;gets explicitly. Default: true</span><br><span class="line"> replicas        Enable region replica testing. Defaults: 1.</span><br><span class="line"> splitPolicy     Specify a custom RegionSplitPolicy for the table.</span><br><span class="line"> randomSleep     Do a random sleep before each get between 0 and entered value. Defaults: 0</span><br><span class="line"> columns         Columns to write per row. Default: 1</span><br><span class="line"> caching         Scan caching to use. Default: 30</span><br><span class="line"></span><br><span class="line"> Note: -D properties will be applied to the conf used. </span><br><span class="line">  For example: </span><br><span class="line">   -Dmapreduce.output.fileoutputformat.compress&#x3D;true</span><br><span class="line">   -Dmapreduce.task.timeout&#x3D;60000</span><br><span class="line"></span><br><span class="line">Command:</span><br><span class="line"> append          Append on each row; clients overlap on keyspace so some concurrent operations</span><br><span class="line"> checkAndDelete  CheckAndDelete on each row; clients overlap on keyspace so some concurrent operations</span><br><span class="line"> checkAndMutate  CheckAndMutate on each row; clients overlap on keyspace so some concurrent operations</span><br><span class="line"> checkAndPut     CheckAndPut on each row; clients overlap on keyspace so some concurrent operations</span><br><span class="line"> filterScan      Run scan test using a filter to find a specific row based on it&#39;s value (make sure to use --rows&#x3D;20)</span><br><span class="line"> increment       Increment on each row; clients overlap on keyspace so some concurrent operations</span><br><span class="line"> randomRead      Run random read test</span><br><span class="line"> randomSeekScan  Run random seek and scan 100 test</span><br><span class="line"> randomWrite     Run random write test</span><br><span class="line"> scan            Run scan test (read every row)</span><br><span class="line"> scanRange10     Run random seek scan with both start and stop row (max 10 rows)</span><br><span class="line"> scanRange100    Run random seek scan with both start and stop row (max 100 rows)</span><br><span class="line"> scanRange1000   Run random seek scan with both start and stop row (max 1000 rows)</span><br><span class="line"> scanRange10000  Run random seek scan with both start and stop row (max 10000 rows)</span><br><span class="line"> sequentialRead  Run sequential read test</span><br><span class="line"> sequentialWrite Run sequential write test</span><br><span class="line"></span><br><span class="line">Args:</span><br><span class="line"> nclients        Integer. Required. Total number of clients (and HRegionServers)</span><br><span class="line">                 running: 1 &lt;&#x3D; value &lt;&#x3D; 500</span><br><span class="line">Examples:</span><br><span class="line"> To run a single client doing the default 1M sequentialWrites:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.PerformanceEvaluation sequentialWrite 1</span><br><span class="line"> To run 10 clients doing increments over ten rows:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.PerformanceEvaluation --rows&#x3D;10 --nomapred increment 10</span><br></pre></td></tr></table></figure>

<h2 id="rs关闭-重启"><a href="#rs关闭-重启" class="headerlink" title="rs关闭/重启"></a>rs关闭/重启</h2><h3 id="rs重启"><a href="#rs重启" class="headerlink" title="rs重启"></a>rs重启</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;graceful_stop.sh --restart --reload --debug nodename</span><br></pre></td></tr></table></figure>

<p>进行操作前先将balancer关闭,操作完成后再打开balancer.<br>这个操作是平滑的重启regionserver进程,对服务不会有影响,会先将需要重启的regionserver上面的所有 region迁移到其它的服务器,然后重启,最后又会将之前的region迁移回来,但修改一个配置时,可以用这种方式重启每一台机子,对于hbase regionserver重启,不要直接kill进程,这样会造成在<code>zookeeper.session.timeout</code>这个时间长的中断,也不要通过 <code>bin/hbase-daemon.sh stop regionserver</code>去重启,如果运气不太好,-ROOT-或者.META.表在上面的话,所有的请求会全部失败.</p>
<h3 id="rs关闭下线"><a href="#rs关闭下线" class="headerlink" title="rs关闭下线"></a>rs关闭下线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;graceful_stop.sh nodename</span><br></pre></td></tr></table></figure>

<p>进行操作前先将balancer关闭,操作完成后再打开balancer.<br>和上面一样,系统会在关闭之前迁移所有region,然后stop进程.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Usage: graceful_stop.sh [--config &lt;conf-dir&gt;] [-d] [-e] [--restart [--reload]] [--thrift] [--rest] &lt;hostname&gt;</span><br><span class="line"> thrift         If we should stop&#x2F;start thrift before&#x2F;after the hbase stop&#x2F;start</span><br><span class="line"> rest           If we should stop&#x2F;start rest before&#x2F;after the hbase stop&#x2F;start</span><br><span class="line"> restart        If we should restart after graceful stop</span><br><span class="line"> reload         Move offloaded regions back on to the restarted server</span><br><span class="line"> d|debug        Print helpful debug information</span><br><span class="line"> maxthreads xx  Limit the number of threads used by the region mover. Default value is 1.</span><br><span class="line"> hostname       Hostname of server we are to stop</span><br><span class="line"> e|failfast     Set -e so exit immediately if any command exits with non-zero status</span><br></pre></td></tr></table></figure>

<h3 id="滚动重启-rolling-restart-sh"><a href="#滚动重启-rolling-restart-sh" class="headerlink" title="滚动重启(rolling-restart.sh)"></a>滚动重启(rolling-restart.sh)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: rolling-restart.sh [--config &lt;hbase-confdir&gt;] [--rs-only] [--master-only] [--graceful] [--maxthreads xx]</span><br></pre></td></tr></table></figure>

<p>1)仅在RegionServers上滚动重启<br>要仅在RegionServers上执行滚动重启,请使用该--rs-only选项.<br>如果需要重新启动单个RegionServer,或者进行的配置更改仅影响RegionServers而不会影响其他HBase进程,这可能是必要的.</p>
<p>2)仅在Master上滚动重启<br>要在活动和备份Master上执行滚动重启,请使用该--master-only选项.<br>如果知道配置更改仅影响Master而不是RegionServers,或者需要重新启动正在运行活动Master的服务器,则可以使用此选项.</p>
<p>3)优雅重启<br>如果指定该--graceful选项,RegionServers将使用bin/graceful_stop.sh脚本重新启动,该脚本在重新启动之前将区域移出RegionServer.<br>这更安全,但可能会延迟重新启动.</p>
<h2 id="其它工具命令"><a href="#其它工具命令" class="headerlink" title="其它工具命令"></a>其它工具命令</h2><h3 id="CreateSnapshot"><a href="#CreateSnapshot" class="headerlink" title="CreateSnapshot"></a>CreateSnapshot</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hbase snapshot -help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">usage: bin&#x2F;hbase org.apache.hadoop.hbase.snapshot.CreateSnapshot &lt;options&gt;</span><br><span class="line">Options:</span><br><span class="line"> -n,--name &lt;arg&gt;            The name of the created snapshot</span><br><span class="line"> -s,--snapshot_type &lt;arg&gt;   Snapshot Type. FLUSH is default. Posible values are [DISABLED, FLUSH, SKIPFLUSH]</span><br><span class="line"> -t,--table &lt;arg&gt;           The name of the table</span><br></pre></td></tr></table></figure>

<h3 id="SnapshotInfo"><a href="#SnapshotInfo" class="headerlink" title="SnapshotInfo"></a>SnapshotInfo</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hbase snapshotinfo -help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">UNEXPECTED: -help</span><br><span class="line">Usage: bin&#x2F;hbase org.apache.hadoop.hbase.snapshot.SnapshotInfo [options]</span><br><span class="line"> where [options] are:</span><br><span class="line">  -h|-help                Show this help and exit.</span><br><span class="line">  -remote-dir             Root directory that contains the snapshots.</span><br><span class="line">  -list-snapshots         List all the available snapshots and exit.</span><br><span class="line">  -size-in-bytes          Print the size of the files in bytes.</span><br><span class="line">  -snapshot NAME          Snapshot to examine.</span><br><span class="line">  -files                  Files and logs list.</span><br><span class="line">  -stats                  Files and logs stats.</span><br><span class="line">  -schema                 Describe the snapshotted table.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  hbase class org.apache.hadoop.hbase.snapshot.SnapshotInfo \</span><br><span class="line">    -snapshot MySnapshot -files</span><br></pre></td></tr></table></figure>

<h3 id="ExportSnapshot"><a href="#ExportSnapshot" class="headerlink" title="ExportSnapshot"></a>ExportSnapshot</h3><p>使用ExportSnapshot工具将现有快照导出至其他集群</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.snapshot.ExportSnapshot -snapshot snapxx2 -copy-to hdfs:&#x2F;&#x2F;172.18.250.101:8020&#x2F;hbase</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Usage: bin&#x2F;hbase org.apache.hadoop.hbase.snapshot.ExportSnapshot [options]</span><br><span class="line"> where [options] are:</span><br><span class="line">  -h|-help                Show this help and exit.</span><br><span class="line">  -snapshot NAME          Snapshot to restore.</span><br><span class="line">  -copy-to NAME           Remote destination hdfs:&#x2F;&#x2F;</span><br><span class="line">  -copy-from NAME         Input folder hdfs:&#x2F;&#x2F; (default hbase.rootdir)</span><br><span class="line">  -no-checksum-verify     Do not verify checksum, use name+length only.</span><br><span class="line">  -no-target-verify       Do not verify the integrity of the \exported snapshot.</span><br><span class="line">  -overwrite              Rewrite the snapshot manifest if already exists</span><br><span class="line">  -chuser USERNAME        Change the owner of the files to the specified one.</span><br><span class="line">  -chgroup GROUP          Change the group of the files to the specified one.</span><br><span class="line">  -chmod MODE             Change the permission of the files to the specified one.</span><br><span class="line">  -mappers                Number of mappers to use during the copy (mapreduce.job.maps).</span><br><span class="line">  -bandwidth              Limit bandwidth to this value in MB&#x2F;second.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  hbase org.apache.hadoop.hbase.snapshot.ExportSnapshot \</span><br><span class="line">    -snapshot MySnapshot -copy-to hdfs:&#x2F;&#x2F;srv2:8082&#x2F;hbase \</span><br><span class="line">    -chuser MyUser -chgroup MyGroup -chmod 700 -mappers 16</span><br><span class="line"></span><br><span class="line">  hbase org.apache.hadoop.hbase.snapshot.ExportSnapshot \</span><br><span class="line">    -snapshot MySnapshot -copy-from hdfs:&#x2F;&#x2F;srv2:8082&#x2F;hbase \</span><br><span class="line">    -copy-to hdfs:&#x2F;&#x2F;srv1:50070&#x2F;hbase \</span><br></pre></td></tr></table></figure>

<h3 id="Export-Import"><a href="#Export-Import" class="headerlink" title="Export/Import"></a>Export/Import</h3><p>默认导出路径为hdfs路径,也可以加<code>file:///</code>导出本地目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.Export testtable &#x2F;user&#x2F;testtable [versions] [starttime] [stoptime]</span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.Import testtable  &#x2F;user&#x2F;testtable</span><br><span class="line"></span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.Export xx1 .&#x2F;xx1 1 0 2658195800850</span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.Export xx1 file:&#x2F;&#x2F;&#x2F;opt&#x2F;hbase&#x2F;xx1 1 0 2658195800850</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Usage: Export [-D &lt;property&#x3D;value&gt;]* &lt;tablename&gt; &lt;outputdir&gt; [&lt;versions&gt; [&lt;starttime&gt; [&lt;endtime&gt;]] [^[regex pattern] or [Prefix] to filter]]</span><br><span class="line"></span><br><span class="line">  Note: -D properties will be applied to the conf used. </span><br><span class="line">  For example: </span><br><span class="line">   -D mapreduce.output.fileoutputformat.compress&#x3D;true</span><br><span class="line">   -D mapreduce.output.fileoutputformat.compress.codec&#x3D;org.apache.hadoop.io.compress.GzipCodec</span><br><span class="line">   -D mapreduce.output.fileoutputformat.compress.type&#x3D;BLOCK</span><br><span class="line">  Additionally, the following SCAN properties can be specified</span><br><span class="line">  to control&#x2F;limit what is exported..</span><br><span class="line">   -D hbase.mapreduce.scan.column.family&#x3D;&lt;familyName&gt;</span><br><span class="line">   -D hbase.mapreduce.include.deleted.rows&#x3D;true</span><br><span class="line">   -D hbase.mapreduce.scan.row.start&#x3D;&lt;ROWSTART&gt;</span><br><span class="line">   -D hbase.mapreduce.scan.row.stop&#x3D;&lt;ROWSTOP&gt;</span><br><span class="line">For performance consider the following properties:</span><br><span class="line">   -Dhbase.client.scanner.caching&#x3D;100</span><br><span class="line">   -Dmapreduce.map.speculative&#x3D;false</span><br><span class="line">   -Dmapreduce.reduce.speculative&#x3D;false</span><br><span class="line">For tables with very wide rows consider setting the batch size as below:</span><br><span class="line">   -Dhbase.export.scanner.batch&#x3D;10</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Usage: Import [options] &lt;tablename&gt; &lt;inputdir&gt;</span><br><span class="line">By default Import will load data directly into HBase. To instead generate</span><br><span class="line">HFiles of data to prepare for a bulk data load, pass the option:</span><br><span class="line">  -Dimport.bulk.output&#x3D;&#x2F;path&#x2F;for&#x2F;output</span><br><span class="line"> To apply a generic org.apache.hadoop.hbase.filter.Filter to the input, use</span><br><span class="line">  -Dimport.filter.class&#x3D;&lt;name of filter class&gt;</span><br><span class="line">  -Dimport.filter.args&#x3D;&lt;comma separated list of args for filter</span><br><span class="line"> NOTE: The filter will be applied BEFORE doing key renames via the HBASE_IMPORTER_RENAME_CFS property. Futher, filters will only use the Filter#filterRowKey(byte[] buffer, int offset, int length) method to identify  whether the current row needs to be ignored completely for processing and  Filter#filterKeyValue(KeyValue) method to determine if the KeyValue should be added; Filter.ReturnCode#INCLUDE and #INCLUDE_AND_NEXT_COL will be considered as including the KeyValue.</span><br><span class="line">To import data exported from HBase 0.94, use</span><br><span class="line">  -Dhbase.import.version&#x3D;0.94</span><br><span class="line">For performance consider the following options:</span><br><span class="line">  -Dmapreduce.map.speculative&#x3D;false</span><br><span class="line">  -Dmapreduce.reduce.speculative&#x3D;false</span><br><span class="line">  -Dimport.wal.durability&#x3D;&lt;Used while writing data to hbase. Allowed values are the supported durability values like SKIP_WAL&#x2F;ASYNC_WAL&#x2F;SYNC_WAL&#x2F;...&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ImportTsv"><a href="#ImportTsv" class="headerlink" title="ImportTsv"></a>ImportTsv</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Usage: importtsv -Dimporttsv.columns&#x3D;a,b,c &lt;tablename&gt; &lt;inputdir&gt;</span><br><span class="line"></span><br><span class="line">Imports the given input directory of TSV data into the specified table.</span><br><span class="line"></span><br><span class="line">The column names of the TSV data must be specified using the -Dimporttsv.columns</span><br><span class="line">option. This option takes the form of comma-separated column names, where each</span><br><span class="line">column name is either a simple column family, or a columnfamily:qualifier. The special</span><br><span class="line">column name HBASE_ROW_KEY is used to designate that this column should be used</span><br><span class="line">as the row key for each imported record. You must specify exactly one column</span><br><span class="line">to be the row key, and you must specify a column name for every column that exists in the</span><br><span class="line">input data. Another special columnHBASE_TS_KEY designates that this column should be</span><br><span class="line">used as timestamp for each record. Unlike HBASE_ROW_KEY, HBASE_TS_KEY is optional.</span><br><span class="line">You must specify at most one column as timestamp key for each imported record.</span><br><span class="line">Record with invalid timestamps (blank, non-numeric) will be treated as bad record.</span><br><span class="line">Note: if you use this option, then &#39;importtsv.timestamp&#39; option will be ignored.</span><br><span class="line"></span><br><span class="line">Other special columns that can be specified are HBASE_CELL_TTL and HBASE_CELL_VISIBILITY.</span><br><span class="line">HBASE_CELL_TTL designates that this column will be used as a Cell&#39;s Time To Live (TTL) attribute.</span><br><span class="line">HBASE_CELL_VISIBILITY designates that this column contains the visibility label expression.</span><br><span class="line"></span><br><span class="line">HBASE_ATTRIBUTES_KEY can be used to specify Operation Attributes per record.</span><br><span class="line"> Should be specified as key&#x3D;&gt;value where -1 is used </span><br><span class="line"> as the seperator.  Note that more than one OperationAttributes can be specified.</span><br><span class="line">By default importtsv will load data directly into HBase. To instead generate</span><br><span class="line">HFiles of data to prepare for a bulk data load, pass the option:</span><br><span class="line">  -Dimporttsv.bulk.output&#x3D;&#x2F;path&#x2F;for&#x2F;output</span><br><span class="line">  Note: if you do not use this option, then the target table must already exist in HBase</span><br><span class="line"></span><br><span class="line">Other options that may be specified with -D include:</span><br><span class="line">  -Dimporttsv.skip.bad.lines&#x3D;false - fail if encountering an invalid line</span><br><span class="line">  &#39;-Dimporttsv.separator&#x3D;|&#39; - eg separate on pipes instead of tabs</span><br><span class="line">  -Dimporttsv.timestamp&#x3D;currentTimeAsLong - use the specified timestamp for the import</span><br><span class="line">  -Dimporttsv.mapper.class&#x3D;my.Mapper - A user-defined Mapper to use instead of org.apache.hadoop.hbase.mapreduce.TsvImporterMapper</span><br><span class="line">  -Dmapreduce.job.name&#x3D;jobName - use the specified mapreduce job name for the import</span><br><span class="line">  -Dcreate.table&#x3D;no - can be used to avoid creation of table by this tool</span><br><span class="line">  Note: if you set this to &#39;no&#39;, then the target table must already exist in HBase</span><br><span class="line">  -Dno.strict&#x3D;true - ignore column family check in hbase table. Default is false</span><br><span class="line"></span><br><span class="line">For performance consider the following options:</span><br><span class="line">  -Dmapreduce.map.speculative&#x3D;false</span><br><span class="line">  -Dmapreduce.reduce.speculative&#x3D;false</span><br></pre></td></tr></table></figure>

<h3 id="LoadIncrementalHFiles"><a href="#LoadIncrementalHFiles" class="headerlink" title="LoadIncrementalHFiles"></a>LoadIncrementalHFiles</h3><p>与importtsv结合使用,完成批量加载.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hbase org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles -help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">usage: completebulkload &#x2F;path&#x2F;to&#x2F;hfileoutputformat-output tablename</span><br><span class="line"> -Dcreate.table&#x3D;no - can be used to avoid creation of table by this tool</span><br><span class="line">  Note: if you set this to &#39;no&#39;, then the target table must already exist in HBase</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles &lt;hdfs:&#x2F;&#x2F;storefileoutput&gt; &lt;tablename&gt;</span><br></pre></td></tr></table></figure>

<h4 id="测试批量导入数据"><a href="#测试批量导入数据" class="headerlink" title="测试批量导入数据"></a>测试批量导入数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create &#39;wordcount&#39;, &#123;NAME &#x3D;&gt; &#39;f&#39;&#125;, &#123;SPLITS &#x3D;&gt; [&#39;g&#39;, &#39;m&#39;, &#39;r&#39;, &#39;w&#39;]&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;people.apache.org&#x2F;~jdcryans&#x2F;word_count.csv</span><br><span class="line">hdfs dfs -put word_count.csv &#x2F;user&#x2F;xxx&#x2F;</span><br><span class="line"></span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.ImportTsv \</span><br><span class="line">-Dmapreduce.map.speculative&#x3D;false \</span><br><span class="line">-Dmapreduce.reduce.speculative&#x3D;false \</span><br><span class="line">-Dimporttsv.separator&#x3D;, \</span><br><span class="line">-Dimporttsv.bulk.output&#x3D;&#x2F;user&#x2F;xxx&#x2F;output \</span><br><span class="line">-Dimporttsv.columns&#x3D;HBASE_ROW_KEY,f:count wordcount &#x2F;user&#x2F;xxx&#x2F;word_count.csv</span><br><span class="line"></span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles &#x2F;user&#x2F;xxx&#x2F;output wordcount</span><br></pre></td></tr></table></figure>

<h3 id="HFile"><a href="#HFile" class="headerlink" title="HFile"></a>HFile</h3><p>看HFile内容.<br>./bin/hbase org.apache.hadoop.hbase.io.hfile.HFile -v -f /hbase/data/default/xx1/f10860829177c2f160c2f57cdebf2cd9/d/5c9a8306fde549bab1dcb278efbdf634</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">usage: HFile [-a] [-b] [-e] [-f &lt;arg&gt; | -r &lt;arg&gt;] [-h] [-k] [-m] [-p]</span><br><span class="line">       [-s] [-v] [-w &lt;arg&gt;]</span><br><span class="line"> -a,--checkfamily         Enable family check</span><br><span class="line"> -b,--printblocks         Print block index meta data</span><br><span class="line"> -e,--printkey            Print keys</span><br><span class="line"> -f,--file &lt;arg&gt;          File to scan. Pass full-path; e.g.</span><br><span class="line">                          hdfs:&#x2F;&#x2F;a:9000&#x2F;hbase&#x2F;hbase:meta&#x2F;12&#x2F;34</span><br><span class="line"> -h,--printblockheaders   Print block headers for each block.</span><br><span class="line"> -k,--checkrow            Enable row order check; looks for out-of-order</span><br><span class="line">                          keys</span><br><span class="line"> -m,--printmeta           Print meta data of file</span><br><span class="line"> -p,--printkv             Print key&#x2F;value pairs</span><br><span class="line"> -r,--region &lt;arg&gt;        Region to scan. Pass region name; e.g.</span><br><span class="line">                          &#39;hbase:meta,,1&#39;</span><br><span class="line"> -s,--stats               Print statistics</span><br><span class="line"> -v,--verbose             Verbose output; emits file and meta data</span><br><span class="line">                          delimiters</span><br><span class="line"> -w,--seekToRow &lt;arg&gt;     Seek to this row and print all the kvs for this</span><br><span class="line">                          row only</span><br></pre></td></tr></table></figure>

<h3 id="CopyTable"><a href="#CopyTable" class="headerlink" title="CopyTable"></a>CopyTable</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Usage: CopyTable [general options] [--starttime&#x3D;X] [--endtime&#x3D;Y] [--new.name&#x3D;NEW] [--peer.adr&#x3D;ADR] &lt;tablename&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> rs.class     hbase.regionserver.class of the peer cluster</span><br><span class="line">              specify if different from current cluster</span><br><span class="line"> rs.impl      hbase.regionserver.impl of the peer cluster</span><br><span class="line"> startrow     the start row</span><br><span class="line"> stoprow      the stop row</span><br><span class="line"> starttime    beginning of the time range (unixtime in millis)</span><br><span class="line">              without endtime means from starttime to forever</span><br><span class="line"> endtime      end of the time range.  Ignored if no starttime specified.</span><br><span class="line"> versions     number of cell versions to copy</span><br><span class="line"> new.name     new table&#39;s name</span><br><span class="line"> peer.adr     Address of the peer cluster given in the format</span><br><span class="line">              hbase.zookeeer.quorum:hbase.zookeeper.client.port:zookeeper.znode.parent</span><br><span class="line"> families     comma-separated list of families to copy</span><br><span class="line">              To copy from cf1 to cf2, give sourceCfName:destCfName. </span><br><span class="line">              To keep the same name, just give &quot;cfName&quot;</span><br><span class="line"> all.cells    also copy delete markers and deleted cells</span><br><span class="line"> bulkload     Write input into HFiles and bulk load to the destination table</span><br><span class="line"></span><br><span class="line">Args:</span><br><span class="line"> tablename    Name of the table to copy</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"> To copy &#39;TestTable&#39; to a cluster that uses replication for a 1 hour window:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.CopyTable --starttime&#x3D;1265875194289 --endtime&#x3D;1265878794289 --peer.adr&#x3D;server1,server2,server3:2181:&#x2F;hbase --families&#x3D;myOldCf:myNewCf,cf2,cf3 TestTable </span><br><span class="line">For performance consider the following general option:</span><br><span class="line">  It is recommended that you set the following to &gt;&#x3D;100. A higher value uses more memory but</span><br><span class="line">  decreases the round trip time to the server and may increase performance.</span><br><span class="line">    -Dhbase.client.scanner.caching&#x3D;100</span><br><span class="line">  The following should always be set to false, to prevent writing data twice, which may produce </span><br><span class="line">  inaccurate results.</span><br><span class="line">    -Dmapreduce.map.speculative&#x3D;false</span><br></pre></td></tr></table></figure>

<h3 id="CompactionTool"><a href="#CompactionTool" class="headerlink" title="CompactionTool"></a>CompactionTool</h3><p>CompactionTool提供了一种将压缩(次要或主要)作为独立于 RegionServer 的进程运行的方法.<br>它重用了由 RegionServer 压缩功能执行的相同内部实现类.<br>但是,由于它在一个完全独立的独立 Java 进程上运行,因此它使 RegionServers 免于重写一组 hfile 所涉及的开销,这对于延迟敏感的用例来说可能是至关重要的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.regionserver.CompactionTool -help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Usage: java org.apache.hadoop.hbase.regionserver.CompactionTool \</span><br><span class="line">  [-compactOnce] [-major] [-mapred] [-D&lt;property&#x3D;value&gt;]* files...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> mapred         Use MapReduce to run compaction.</span><br><span class="line"> compactOnce    Execute just one compaction step. (default: while needed)</span><br><span class="line"> major          Trigger major compaction.</span><br><span class="line"></span><br><span class="line">Note: -D properties will be applied to the conf used. </span><br><span class="line">For example: </span><br><span class="line"> To preserve input files, pass -Dhbase.hstore.compaction.complete&#x3D;false</span><br><span class="line"> To stop delete of compacted file, pass -Dhbase.compactiontool.delete&#x3D;false</span><br><span class="line"> To set tmp dir, pass -Dhbase.tmp.dir&#x3D;ALTERNATE_DIR</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"> To compact the full &#39;TestTable&#39; using MapReduce:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.regionserver.CompactionTool -mapred hdfs:&#x2F;&#x2F;&#x2F;hbase&#x2F;data&#x2F;default&#x2F;TestTable</span><br><span class="line"></span><br><span class="line"> To compact column family &#39;x&#39; of the table &#39;TestTable&#39; region &#39;abc&#39;:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.regionserver.CompactionTool hdfs:&#x2F;&#x2F;&#x2F;hbase&#x2F;data&#x2F;default&#x2F;TestTable&#x2F;abc&#x2F;x</span><br><span class="line">No directories to compact specified.</span><br><span class="line">Usage: java org.apache.hadoop.hbase.regionserver.CompactionTool \</span><br><span class="line">  [-compactOnce] [-major] [-mapred] [-D&lt;property&#x3D;value&gt;]* files...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> mapred         Use MapReduce to run compaction.</span><br><span class="line"> compactOnce    Execute just one compaction step. (default: while needed)</span><br><span class="line"> major          Trigger major compaction.</span><br><span class="line"></span><br><span class="line">Note: -D properties will be applied to the conf used. </span><br><span class="line">For example: </span><br><span class="line"> To preserve input files, pass -Dhbase.hstore.compaction.complete&#x3D;false</span><br><span class="line"> To stop delete of compacted file, pass -Dhbase.compactiontool.delete&#x3D;false</span><br><span class="line"> To set tmp dir, pass -Dhbase.tmp.dir&#x3D;ALTERNATE_DIR</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"> To compact the full &#39;TestTable&#39; using MapReduce:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.regionserver.CompactionTool -mapred hdfs:&#x2F;&#x2F;&#x2F;hbase&#x2F;data&#x2F;default&#x2F;TestTable</span><br><span class="line"></span><br><span class="line"> To compact column family &#39;x&#39; of the table &#39;TestTable&#39; region &#39;abc&#39;:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.regionserver.CompactionTool hdfs:&#x2F;&#x2F;&#x2F;hbase&#x2F;data&#x2F;default&#x2F;TestTable&#x2F;abc&#x2F;x</span><br></pre></td></tr></table></figure>

<p>CompactionTool可以作为独立客户端或 mapreduce 作业运行.<br>当作为 mapreduce 作业运行时,每个 family dir 都作为输入拆分处理,并由单独的 map 任务处理.</p>
<p>compactionOnce参数控制在CompactionTool程序决定完成其工作之前将执行多少个压缩循环.<br>如果省略,它将假设它应该继续在每个指定的家族上运行压缩,正如配置的给定压缩策略所确定的那样.</p>
<p>如果需要主要压缩,可以指定主要标志.<br>如果省略,CompactionTool将假定默认情况下需要较小的压缩.</p>
<p>它还允许使用<font color="red">-D</font>标志覆盖配置.<br>例如,在上面的用法部分中, <code>-Dhbase.compactiontool.delete=false</code>选项将指示压缩引擎不要从临时文件夹中删除原始文件.</p>
<p>压缩目标文件必须指定为父 hdfs 目录.<br>它允许定义多个目录,只要这些目录的每个目录都是family/region/table目录.<br>如果传递了表或区域目录,程序将递归地遍历相关的子文件夹,有效地为在表/区域级别下找到的每个家族运行压缩.</p>
<p>由于这些目录嵌套在hbase hdfs 目录树下,CompactionTool需要 hbase 超级用户权限才能访问所需的 hfiles.</p>
<h4 id="以-MapReduce-模式运行"><a href="#以-MapReduce-模式运行" class="headerlink" title="以 MapReduce 模式运行"></a>以 MapReduce 模式运行</h4><p>MapReduce 模式提供了并行处理每个系列目录的能力,作为一个单独的映射任务.<br>通常,当指定一个或多个表目录作为压缩目标时,以这种模式运行是有意义的.<br>但需要注意的是,如果要压缩的家庭数量变得太大,相关的 mapreduce 作业可能会对RegionServers性能产生间接影响.<br>由于NodeManagers通常与 RegionServers 位于同一地点,因此此类大型作业可能会与 RegionServers 竞争 IO/带宽资源.</p>
<p>由于性能影响,MajorCompaction 在 RegionServers 上完全禁用<br>Major compaction可能是一项代价高昂的操作,并且确实会影响 RegionServers 的性能,导致运营商为关键的低延迟应用程序完全禁用它.<br>CompactionTool可以在这种情况下用作替代方案,尽管需要实现额外的自定义应用程序逻辑,例如为给定的压缩运行决定表/区域/系列目标的调度和选择.</p>
<h3 id="HashTable-SyncTable"><a href="#HashTable-SyncTable" class="headerlink" title="HashTable/SyncTable"></a>HashTable/SyncTable</h3><p>HashTable/SyncTable 是一个用于同步表数据的两步工具,其中每个步骤都作为 MapReduce 作业实现.<br>与 CopyTable 类似,它可以用于同一或远程集群下的部分或整个表数据同步.<br>但是,它以比 CopyTable 更有效的方式执行同步.<br>HashTable(第一步)不是复制指定行键/时间段范围内的所有单元格,而是为源表上的一批单元格创建散列索引并将其作为结果输出.<br>在下一阶段,SyncTable 扫描源表,现在计算表单元格的哈希索引,将这些哈希值与 HashTable 的输出进行比较,然后它只扫描(并比较)单元格以寻找不同的哈希值,只更新不匹配的单元格.<br>这导致更少的网络流量/数据传输.</p>
<p>首先,在源表集群上运行 HashTable(这是其状态将被复制到对应表的表).<br>一旦 HashTable 在源集群上完成,SyncTable 就可以在目标集群上运行.<br>就像复制和其他同步作业一样,它要求源集群上的所有 RegionServers/DataNodes 都可以被目标集群上的 NodeManagers 访问(SyncTable 作业任务将在其中运行).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.HashTable --help</span><br><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.SyncTable --help</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Usage: HashTable [options] &lt;tablename&gt; &lt;outputpath&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> batchsize     the target amount of bytes to hash in each batch</span><br><span class="line">               rows are added to the batch until this size is reached</span><br><span class="line">               (defaults to 8000 bytes)</span><br><span class="line"> numhashfiles  the number of hash files to create</span><br><span class="line">               if set to fewer than number of regions then</span><br><span class="line">               the job will create this number of reducers</span><br><span class="line">               (defaults to 1&#x2F;100 of regions -- at least 1)</span><br><span class="line"> startrow      the start row</span><br><span class="line"> stoprow       the stop row</span><br><span class="line"> starttime     beginning of the time range (unixtime in millis)</span><br><span class="line">               without endtime means from starttime to forever</span><br><span class="line"> endtime       end of the time range.  Ignored if no starttime specified.</span><br><span class="line"> scanbatch     scanner batch size to support intra row scans</span><br><span class="line"> versions      number of cell versions to include</span><br><span class="line"> families      comma-separated list of families to include</span><br><span class="line"></span><br><span class="line">Args:</span><br><span class="line"> tablename     Name of the table to hash</span><br><span class="line"> outputpath    Filesystem path to put the output data</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"> To hash &#39;TestTable&#39; in 32kB batches for a 1 hour window into 50 files:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.HashTable --batchsize&#x3D;32000 --numhashfiles&#x3D;50 --starttime&#x3D;1265875194289 --endtime&#x3D;1265878794289 --families&#x3D;cf2,cf3 TestTable &#x2F;hashes&#x2F;testTable</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Usage: SyncTable [options] &lt;sourcehashdir&gt; &lt;sourcetable&gt; &lt;targettable&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"> sourcezkcluster  ZK cluster key of the source table</span><br><span class="line">                  (defaults to cluster in classpath&#39;s config)</span><br><span class="line"> targetzkcluster  ZK cluster key of the target table</span><br><span class="line">                  (defaults to cluster in classpath&#39;s config)</span><br><span class="line"> dryrun           if true, output counters but no writes</span><br><span class="line">                  (defaults to false)</span><br><span class="line"></span><br><span class="line">Args:</span><br><span class="line"> sourcehashdir    path to HashTable output dir for source table</span><br><span class="line">                  if not specified, then all data will be scanned</span><br><span class="line"> sourcetable      Name of the source table to sync from</span><br><span class="line"> targettable      Name of the target table to sync to</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"> For a dry run SyncTable of tableA from a remote source cluster</span><br><span class="line"> to a local target cluster:</span><br><span class="line"> $ bin&#x2F;hbase org.apache.hadoop.hbase.mapreduce.SyncTable --dryrun&#x3D;true --sourcezkcluster&#x3D;zk1.example.com,zk2.example.com,zk3.example.com:2181:&#x2F;hbase hdfs:&#x2F;&#x2F;nn:9000&#x2F;hashes&#x2F;tableA tableA tableA</span><br></pre></td></tr></table></figure>

<h3 id="Merge"><a href="#Merge" class="headerlink" title="Merge"></a>Merge</h3><p>合并同一个表中的相邻区域.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase org.apache.hadoop.hbase.util.Merge --help</span><br></pre></td></tr></table></figure>

<p>region为区域的完全限定名称,如&quot;table_name,\x0A,1342956111995.7cef47f192318ba7ccc75b1bbf27a82b.&quot;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin&#x2F;hbase org.apache.hadoop.hbase.util.Merge [-Dfs.defaultFS&#x3D;hdfs:&#x2F;&#x2F;nn:port] &lt;table-name&gt; &lt;region-1&gt; &lt;region-2&gt;</span><br></pre></td></tr></table></figure>

<h2 id="hbase脚本"><a href="#hbase脚本" class="headerlink" title="hbase脚本"></a>hbase脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;describe &#x27;test&#x27;&quot;</span> | ./bin/hbase shell -n</span><br><span class="line"></span><br><span class="line"><span class="comment">##要抑制所有输出,将其回显到/dev/null</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;describe &#x27;test&#x27;&quot;</span> | ./bin/hbase shell -n &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<h3 id="检查脚本命令的结果"><a href="#检查脚本命令的结果" class="headerlink" title="检查脚本命令的结果"></a>检查脚本命令的结果</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;describe &#x27;test&#x27;&quot;</span> | ./bin/hbase shell -n &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">status=$?</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The status was &quot;</span> <span class="variable">$status</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$status</span> == 0); <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;The command succeeded&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;The command may have failed.&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">return</span> <span class="variable">$status</span></span><br></pre></td></tr></table></figure>

<h3 id="从命令文件中读取"><a href="#从命令文件中读取" class="headerlink" title="从命令文件中读取"></a>从命令文件中读取</h3><p>将 HBase Shell 命令输入到一个文本文件中,每行一个命令,然后将该文件传递给 HBase Shell.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">create <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;e&#x27;</span></span><br><span class="line">list <span class="string">&#x27;test&#x27;</span></span><br><span class="line">put <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;row1&#x27;</span>, <span class="string">&#x27;e:a&#x27;</span>, <span class="string">&#x27;value1&#x27;</span></span><br><span class="line">put <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;row2&#x27;</span>, <span class="string">&#x27;e:b&#x27;</span>, <span class="string">&#x27;value2&#x27;</span></span><br><span class="line">put <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;row3&#x27;</span>, <span class="string">&#x27;e:c&#x27;</span>, <span class="string">&#x27;value3&#x27;</span></span><br><span class="line">put <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;row4&#x27;</span>, <span class="string">&#x27;e:d&#x27;</span>, <span class="string">&#x27;value4&#x27;</span></span><br><span class="line">scan <span class="string">&#x27;test&#x27;</span></span><br><span class="line">get <span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;row1&#x27;</span></span><br><span class="line"><span class="built_in">disable</span> <span class="string">&#x27;test&#x27;</span></span><br><span class="line"><span class="built_in">enable</span> <span class="string">&#x27;test&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./hbase shell ./sample_commands.txt</span><br></pre></td></tr></table></figure>

<h3 id="将-VM-选项传递给-Shell"><a href="#将-VM-选项传递给-Shell" class="headerlink" title="将 VM 选项传递给 Shell"></a>将 VM 选项传递给 Shell</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HBASE_SHELL_OPTS&#x3D;&quot;-verbose:gc -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCDateStamps \</span><br><span class="line">  -XX:+PrintGCDetails -Xloggc:$HBASE_HOME&#x2F;logs&#x2F;gc-hbase.log&quot; .&#x2F;bin&#x2F;hbase shell</span><br></pre></td></tr></table></figure>

<h3 id="使用-HBase-Shell-预拆分表"><a href="#使用-HBase-Shell-预拆分表" class="headerlink" title="使用 HBase Shell 预拆分表"></a>使用 HBase Shell 预拆分表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create &#39;t1&#39;,&#39;f&#39;,SPLITS &#x3D;&gt; [&#39;10&#39;,&#39;20&#39;,&#39;30&#39;]</span><br><span class="line">create &#39;t14&#39;,&#39;f&#39;,SPLITS_FILE&#x3D;&gt;&#39;splits.txt&#39;</span><br><span class="line"></span><br><span class="line"># create table with four regions based on random bytes keys</span><br><span class="line">create &#39;t2&#39;,&#39;f1&#39;, &#123; NUMREGIONS &#x3D;&gt; 4 , SPLITALGO &#x3D;&gt; &#39;UniformSplit&#39; &#125;</span><br><span class="line"></span><br><span class="line"># create table with five regions based on hex keys</span><br><span class="line">create &#39;t3&#39;,&#39;f1&#39;, &#123; NUMREGIONS &#x3D;&gt; 5, SPLITALGO &#x3D;&gt; &#39;HexStringSplit&#39; &#125;</span><br></pre></td></tr></table></figure>

<img src="/images/fly1398.png" style="margin-left: 0px; padding-bottom: 10px;">
<img src="/images/fly1399.png" style="margin-left: 0px; padding-bottom: 10px;">
<img src="/images/fly1400.png" style="margin-left: 0px; padding-bottom: 10px;">

<blockquote>
<p>使用简单的 Ruby 脚本通过算法计算拆分<br>在hbase命令行下执行.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># generate splits for long (Ruby fixnum) key range from start to end key</span><br><span class="line">def gen_splits(start_key,end_key,num_regions)</span><br><span class="line">  results&#x3D;[]</span><br><span class="line">  range&#x3D;end_key-start_key</span><br><span class="line">  incr&#x3D;(range&#x2F;num_regions).floor</span><br><span class="line">  for i in 1 .. num_regions-1</span><br><span class="line">    results.push([i*incr+start_key].pack(&quot;N&quot;))</span><br><span class="line">  end</span><br><span class="line">  return results</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">splits&#x3D;gen_splits(1,2000000,10)</span><br><span class="line">&#x3D;&gt; [&quot;\000\003\r@&quot;, &quot;\000\006\032\177&quot;, &quot;\000\t&#39;\276&quot;, &quot;\000\f4\375&quot;, &quot;\000\017B&lt;&quot;, &quot;\000\022O&#123;&quot;, &quot;\000\025\\\272&quot;, &quot;\000\030i\371&quot;, &quot;\000\ew8&quot;]</span><br><span class="line"></span><br><span class="line">create &#39;test_splits&#39;,&#39;f&#39;,SPLITS&#x3D;&gt;splits</span><br></pre></td></tr></table></figure>

<img src="/images/fly1401.png" style="margin-left: 0px; padding-bottom: 10px;">
<img src="/images/fly1402.png" style="margin-left: 0px; padding-bottom: 10px;">

<blockquote>
<p>命令truncate有效地删除并使用默认选项重新创建表,这将丢弃任何预拆分.<br>命令truncate_preserve可保留region拆分信息.</p>
</blockquote>
<h3 id="DEBUG-日志级别"><a href="#DEBUG-日志级别" class="headerlink" title="DEBUG 日志级别"></a>DEBUG 日志级别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;bin&#x2F;hbase shell -d</span><br></pre></td></tr></table></figure>




    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/hbase/" rel="tag"># hbase</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/03/hbase%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/" rel="prev" title="hbase默认配置参数">
                  <i class="fa fa-chevron-left"></i> hbase默认配置参数
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/03/03/hbase%E5%AE%89%E8%A3%85/" rel="next" title="hbase安装">
                  hbase安装 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">maoeryu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  






  





</body>
</html>
